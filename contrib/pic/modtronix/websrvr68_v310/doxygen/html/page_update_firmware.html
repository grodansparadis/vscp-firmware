<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>SBC68EC Web Server: Updating The Firmware</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="page_update_firmware">Updating The Firmware </a></h1><h2><a class="anchor" name="page_update_firmware_introduction">
Introduction</a></h2>
The firmware of all new SBC68EC boards (Revision 2 boards programmed with a bootloader) can be updated with the <a class="el" href="tools.html#tools_mxbootloader">Modtronix Network Bootloader</a>, <b>no</b> PIC programmer is required! Simply: <ul>
<li>
Download the latest version of the firmware from <a href="http://www.modtronix.com/products/sbc68ec/firmware" target="_blank">www.modtronix.com/products/sbc68ec/firmware</a> </li>
<li>
Downlaod and install the <a href="http://www.modtronix.com/soft/netloader" target="_blank">Modtronix Network Bootloader</a> </li>
<li>
Start the "Modtronix Network Bootloader" you just installed, and use it to update the firmware on your target board </li>
</ul>
For details, see section below! Ensure your computer's network settings are configured correctly so you can access the IP address of the target board! For details, see <a class="el" href="page_update_firmware.html#page_update_firmware_pcnetwork">Configuring your computer's network settings</a><h2><a class="anchor" name="page_update_firmware_netloader">
Updating the firmware with the Modtronix Network Bootloader</a></h2>
The <a class="el" href="tools.html#tools_mxbootloader">Modtronix Network Bootloader</a> application is a user friendly program that is used to update the firmware on a Modtronix Ethernet enabled SBC board with bootloader. No PIC programmer is required. The SBC board used must have a bootloader installed on it. Such a board can be identified by a <em><b>BLN Vm.nn</b></em> label on the front of the board - normally stuck on the RTL8019AS 100 pin network chip. Where <em><b>Vm.nn</b></em> is the version number of the bootloader. The image below shows an example of the label on a board with a V1.00 bootloader. <div align="center">
<img src="label.jpg" alt="label.jpg">
</div>
<h3><a class="anchor" name="page_update_firmware_local">
Updating the firmware on a local target board</a></h3>
To update the firmware on a local board, follow the following steps: <ul>
<li>
Ensure your SBC68EC is connected to the network, and switched off (no power applied). </li>
<li>
Download, install and start the <a class="el" href="tools.html#tools_mxbootloader">Modtronix Network Bootloader</a> application. </li>
<li>
Enter the target board's current IP address in the "Target IP Address or NetBIOS Name" field. The default IP address for the SBC68EC is "10.1.0.1", and NetBios name is "MXBOARD". </li>
<li>
Enter the target board's configured IP address in the "Target IP Address for Bootloader" field. The default IP address for the SBC68EC is "10.1.0.1". </li>
<li>
Load the new firmware (has to be a hex file) by clicking on the "Browse" button. The latest firmware can be downloaded from <a href="http://www.modtronix.com/products/sbc68ec/firmware" target="_blank">www.modtronix.com/products/sbc68ec/firmware</a>. </li>
<li>
Click on the "Connect" button. This will start sending UDP packets onto the network trying to connect with the bootloader on the SBC68EC. </li>
<li>
Apply power to your SBC68EC. </li>
<li>
You should see a message in the "Message Window" stating that a connection has been made with the target board. </li>
<li>
Click on the "Upgrade Firmware" button. The progress of the firmware upgrade will be shown in the "Message Window". </li>
<li>
When finished, the SBC68EC will automatically be reset, and will start up with the new firmware. </li>
</ul>
<h3><a class="anchor" name="page_update_firmware_remote">
Updating the firmware on a remote target board</a></h3>
The firmware can also be updated from a remote location, via the internet for example. For this to be possible, both the target board and Modtronix Network Bootloader should be connected to the same network or the internet. A way is needed to remotely reset the target device so it can enter bootloader mode for the configured time. The Modtronix SBC68EC Web Server has a reset button on the the password protected "System" page of its web interface. The user has to access this page and reset the target by clicking on this button. After resetting the target board, it will remain in bootloader mode for the configured time. The procedure for updating the firmware is:<p>
<ul>
<li>
Start the Modtronix Network Bootloader program, select the desired IP address and hex file, and click the "Connect" button. It will now start searching for the bootloader device </li>
<li>
Reset the target board by clicking on the "Reset" button on the "System" page of the target board's web interface. </li>
<li>
The Modtronix Network Bootloader should now find the device, and establish a connection. </li>
<li>
After connected, click on the "Update Firmware" button to update the firmware. After successfully updating the firmware, the target board will be reset. </li>
</ul>
<h3><a class="anchor" name="page_update_firmware_error">
Updating the firmware on a faulty board</a></h3>
To update the firmware via the Modtronix Network Bootloader the following must be true:<ul>
<li>We have to know the IP address of the target board.</li><li>The configuration data stored in the target board's EEPROM must not be corrupted. This configuration data is used to set the board's IP address, how long it remains in bootloader mode after power up...</li></ul>
<p>
If for some reason, this EEPROM becomes corrupted, or the user does not know the IP address the device is configured for, the device can be powered up in <a class="el" href="page_safemode.html">Safemode</a>. For details, see <a class="el" href="page_safemode.html">Safemode</a>. When we start the SBC68EC in this mode, it will remain in bootloader mode until it has been programmed via the <a class="el" href="tools.html#tools_mxbootloader">Modtronix Network Bootloader</a>. We can also use any of the following IP addresses to access it:<ul>
<li>10.1.0.1</li><li>192.168.1.1</li><li>192.168.0.1</li></ul>
<p>
The procedure for programming it via the bootloader will be the same as given above in the <a class="el" href="page_update_firmware.html#page_update_firmware_local">Updating the firmware on a local target board</a> section.<h2><a class="anchor" name="page_update_firmware_pcnetwork">
Configuring your computer's network settings</a></h2>
To be able to use the <a href="http://www.modtronix.com/soft/netloader" target="_blank">Modtronix Network Bootloader</a> to update the firmware on a target Ethernet enabled board, your computer's network settings have to be correct so you can access the target board's IP address. For example, if the target board's IP address is 10.1.0.1, you have to ensure that your computer's IP address is on the same subnet. An example would be to configure your IP address to be 10.1.0.100 and your subnet mask 255.255.255.0.<h2><a class="anchor" name="page_update_firmware_faq">
Troubleshooting and FAQ when using the Modtronix Network Bootloader</a></h2>
For troubleshooting and Frequently asked questions when using the "Modtronix Network Bootloader" , see <h2><a class="anchor" name="page_update_firm_web_faq">
Troubleshooting and FAQ</a></h2>
<h2><a class="anchor" name="page_update_firmware_programer">
Updating the firmware with a PIC Programmer</a></h2>
<b style="color: red">Programming a board with bootloader might overwrite the bootlader!</b> Only use the Modtronix Network Bootloader to update the firmware on a board with bootloader. Using a PIC programmer will overwrite the bootloader on the board! The bootloader is NOT made available for free, and can only be replaced by returning the board to Modtronix Engineering to have it re-programmed! Some of the older SBC68EC boards were not shipped with bootloaders. To update these boards with the latest firmware, a PIC programmer is required. For details see <a href="http://www.modtronix.com/picboards/prog" target="_blank">Programming Modtronix PIC based boards</a>. </div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri May 14 08:54:22 2010 for SBC68EC Web Server by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
