<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>SBC68EC Web Server: examples/ex_httpgetvar.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>examples/ex_httpgetvar.c File Reference</h1><code>#include &quot;<a class="el" href="projdefs_8h.html">projdefs.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="http_8h.html">net\http.h</a>&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="compiler_8h.html#2b0e863dadf920709ec53d9088ee7c91">WORD</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ex__httpgetvar_8c.html#015c5b9453668f6d32ada2d7bb20663f">HTTPGetVar</a> (<a class="el" href="struct___h_t_t_p___i_n_f_o.html">HTTP_INFO</a> *httpInfo, <a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *val)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">ROM char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ex__httpgetvar_8c.html#d3633a5b5d908be97e76dfa5cbe2ac45">SerialNumberStr</a> [] = &quot;123456SER&quot;</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="015c5b9453668f6d32ada2d7bb20663f"></a><!-- doxytag: member="ex_httpgetvar.c::HTTPGetVar" ref="015c5b9453668f6d32ada2d7bb20663f" args="(HTTP_INFO *httpInfo, BYTE *val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="compiler_8h.html#2b0e863dadf920709ec53d9088ee7c91">WORD</a> HTTPGetVar           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct___h_t_t_p___i_n_f_o.html">HTTP_INFO</a> *&nbsp;</td>
          <td class="paramname"> <em>httpInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *&nbsp;</td>
          <td class="paramname"> <em>val</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This is a callback function from the <a class="el" href="http_8h.html#b189937b063ba1fac1d6ad56d36d2d10">HTTPServer()</a> to the main application. This function must be implemented by the user somewhere in the code. Whenever a variable substitution is required (the parsed web pages contains a "\%nxx" tag) on any Dynamic pages, HTTPServer calls this function. This function is responsible for replacing this variable ("\%nxx" tag") with a user defined string. For example, the user might want to replace any "\%a00" tag found on a web page with the value of channel 0 of the analog input. When the "\%a00" is found on a web page, the HTTPServer will call this function, and the user can then return a string representing the value of channel 0 of the analog input.<p>
The given HTTP_INFO structure contains a 8-bit <em>variable reference</em> (httpInfo-&gt;VarRef), a 8-bit <em>variable group</em> (httpInfo-&gt;var.get.tagGroup) and a 16-bit <em>variable value</em> (httpInfo-&gt;var.get.tagVal). <br>
The <em>variable reference</em> indicates whether this is a first call or not. <br>
The <em>variable group</em> and <em>variable value</em> gives the group and value of the tag found on the web page.<p>
Applications should return one character at a time as a variable value. If there are no more characters, or the requeseted variable is not found, this function must set <em>val</em> to NULL. Since this function only allows one character to be returned at a time as part of the variable value, <a class="el" href="http_8h.html#b189937b063ba1fac1d6ad56d36d2d10">HTTPServer()</a> calls this function multiple times until the user application indicates that there are no more values left for this variable. On begining, <a class="el" href="http_8h.html#015c5b9453668f6d32ada2d7bb20663f">HTTPGetVar()</a> is called with the <em>variable reference</em> (httpInfo-&gt;var.get.varRef) = HTTP_START_OF_VAR to indicate that this is a first call. Applications should use this reference to start the variable value extraction and return updated reference. If there are no more values left for this variable the application should return HTTP_END_OF_VAR. If there are any bytes left to be sent, the application should return a value other than HTTP_START_OF_VAR or HTTP_END_OF_VAR.<p>
<dl class="user" compact><dt><b>Pre-Condition:</b></dt><dd><a class="el" href="http_8h.html#ee23d8df952c3c1a8466ce016e809d82">HTTPInit()</a> must already be called. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>httpInfo</em>&nbsp;</td><td>HTTP_INFO structure of HTTP connection requesting this Variable. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>val</em>&nbsp;</td><td>Buffer for value storage. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Variable reference as required by application. </dd></dl>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="d3633a5b5d908be97e76dfa5cbe2ac45"></a><!-- doxytag: member="ex_httpgetvar.c::SerialNumberStr" ref="d3633a5b5d908be97e76dfa5cbe2ac45" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROM char <a class="el" href="ex__httpgetvar2_8c.html#d3633a5b5d908be97e76dfa5cbe2ac45">SerialNumberStr</a>[] = &quot;123456SER&quot;          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="ex__httpgetvar_8c-example.html#a1">ex_httpgetvar.c</a>, and <a class="el" href="ex__httpgetvar2_8c-example.html#a1">ex_httpgetvar2.c</a>.</dl>
</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri May 14 08:54:22 2010 for SBC68EC Web Server by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
