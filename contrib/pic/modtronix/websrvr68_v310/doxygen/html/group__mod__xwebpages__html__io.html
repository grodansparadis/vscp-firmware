<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>SBC68EC Web Server: HTML IO</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>HTML IO<br>
<small>
[<a class="el" href="group__mod__xwebpages.html">Example Web Pages</a>]</small>
</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
</table>
The "../src/webpages/html_io" folder contains a web page that demonstrates how to set port pins as inputs or outputs. It also shows how to set the value of output port pins via a button on the web page. It consists of the following files: <ul>
<li>index.htm </li>
<li>main.cgi</li>
</ul>
The example consists of two files because tags are not parsed in htm files, but only in cgi files. All tags are placed in the cgi file. They will be replaced with dynamic values by the web server when a browser requests the page.<h2><a class="anchor" name="index_htm">
index.htm</a></h2>
<div class="fragment"><pre class="fragment">&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Very simple PIC port example&lt;/title&gt;
&lt;/head&gt;

&lt;!-- Place all code containing % tags in main.cgi file. This has to be done seeing that --&gt;
&lt;!-- htm files are not parsed for % tags by default, but only cgi files! --&gt;
&lt;iframe name=main src="main.cgi" height="100%" width="100%" scrolling="no" frameborder=0&gt;&lt;/iframe&gt;

&lt;/body&gt;
&lt;/html&gt;
</pre></div><h2><a class="anchor" name="main_cgi">
main.cgi</a></h2>
<div class="fragment"><pre class="fragment">&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Pragma" content="no-cache"&gt;
&lt;title&gt;Modtronix SBC65EC Demo Web Server&lt;/title&gt;

&lt;script type="text/javascript"&gt;
&lt;!-- The following function will display a button if the given port pin is configured as an --&gt;
&lt;!-- output, or show the port pin value as "0" or "1" if it is configured as a input --&gt;
function ln(io,val,name) {
	document.write("&lt;td align=center&gt;");
	if(io==0) {
		document.write("&lt;input type=submit value="+val+" name=\""+name+"\"&gt;");
	}
	else {
		document.write(val);
	}
	document.write("&lt;/td&gt;");
}

&lt;!-- Executes given HTTP GET command.                           --&gt;
function execCmd(name, value) {
	window.location = document.getElementById("formCfgPin").action
			+ "?" + name + "=" + value;
}
&lt;/script&gt;

&lt;/head&gt;

&lt;body marginwidth="0" marginheight="0" topmargin="0" bottommargin="0" leftmargin="0" rightmargin="0"&gt;

&lt;br&gt;This example enables the user to configure PIC port B0 and B1 as inputs or outputs, and monitor and set
their values. The configuration settings are remembered after power up.

&lt;hr&gt;
&lt;b&gt;Configure Port Pins&lt;/b&gt;
&lt;form method="GET" action="main.cgi"&gt;
	&lt;b&gt;B0: &amp;nbsp; &lt;/b&gt;&lt;input %b48 type=radio value="1" name="bc0r"&gt;Input &amp;nbsp; &lt;input %b40 type=radio value="0" name="bc0r"&gt;Output
	&lt;br&gt;&lt;b&gt;B1: &amp;nbsp; &lt;/b&gt;&lt;input %b49 type=radio value="1" name="bc1r"&gt;Input &amp;nbsp; &lt;input %b41 type=radio value="0" name="bc1r"&gt;Output
	&lt;br&gt; &amp;nbsp; &lt;input type=submit value="Apply Changes"&gt;
&lt;/form&gt;

&lt;hr&gt;
&lt;b&gt;Configure Port Pins&lt;/b&gt;
&lt;br&gt;This is an alternative method to set the direction of the port pins. This method required
some JavaScript.
&lt;form id="formCfgPin" method="GET" action="main.cgi"&gt;
	&lt;input type=button value="Set B0 to output" onclick="execCmd('bc0r','0')"&gt;
	&lt;br&gt;&lt;input type=button value="Set B0 to input" onclick="execCmd('bc0r','1')"&gt;
	&lt;br&gt;&lt;input type=button value="Set B1 to output" onclick="execCmd('bc1r','0')"&gt;
	&lt;br&gt;&lt;input type=button value="Set B1 to input" onclick="execCmd('bc1r','1')"&gt;
&lt;/form&gt;

&lt;hr&gt;
&lt;b&gt;Port pin status&lt;/b&gt;
The following two lines will show the current state of port pins B0 and B1. To change them, set
the port pin as an output, and toggle it's state with the buttons below.
&lt;br&gt;&lt;br&gt;Port B0 state: %b00
&lt;br&gt;Port B1 state: %b01

&lt;hr&gt;

&lt;b&gt;Toggle port pins&lt;/b&gt;
The following two lines will show a button next to the port pin name if it is configured as an output.
When the button is clicked, the port pin's value will be toggled.
&lt;form method="get" action="main.cgi"&gt;
  &lt;!-- The following tags are use, documentation is for port B0:                            --&gt;
  &lt;!-- b50: This tag will be replaced by '0' if port B0 is output, or '1' if it is an input --&gt;
  &lt;!-- b00: This tag is replaced by '1' if port B0 is set, or '0' if port value is 0V       --&gt;
  &lt;!-- The 'bx0' and 'bx1' are CGI commands, and will set or clear the given port pin       --&gt;
  B0: &lt;script type="text/javascript"&gt;ln(%b50,%b00,"bx0");&lt;/script&gt;
  &lt;br&gt;B1: &lt;script type="text/javascript"&gt;ln(%b51,%b01,"bx1");&lt;/script&gt;
&lt;/form&gt;

&lt;hr&gt;



</pre></div><h2><a class="anchor" name="screen_shots">
Screen Shots</a></h2>
<div align="center">
<img src="html_io_index.gif" alt="html_io_index.gif">
</div>
 </div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri May 14 08:54:23 2010 for SBC68EC Web Server by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
