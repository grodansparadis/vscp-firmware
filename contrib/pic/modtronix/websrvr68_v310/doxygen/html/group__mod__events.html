<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>SBC68EC Web Server: Events</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Events</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
</table>
<h2><a class="anchor" name="mod_events_intro">
Introduction</a></h2>
/////////////////////////////////////////////// I2C Bus - documentation module /**<h2><a class="anchor" name="mod_events_intro">
Introduction</a></h2>
In a control system, there are often events that occur that we have to be notified about. For example, when an alarm input goes high. Events are sent to an event port. Currently the only implemented event port is the "UDP Event Port". Each event is sent in a "name=value;" format. Events have the following format: <ul>
<li><code>eventName=eventValue;</code></li>
</ul>
The eventName is the event name (uses <a class="el" href="group__mod__tags.html">Tags</a>), and eventValue is it's value. The event name uses text lables as defined by <a class="el" href="group__mod__tags.html">Tags</a>. Each event is terminated with a ';' character. If the value contains a ';' character, two ';' characters are sent after each other. Multiple events can also be sent in a single message, and will have the following format: <ul>
<li><code>event1Name=event1Value;event2Name=event2Value;event3Name=event3Value;....</code></li>
</ul>
An example event will be when a port changes state. For example, if port A2 changes value from 0 to 1, the following event will be sent (if the system is configured to send events for port A2): <br>
a02=1;<h2><a class="anchor" name="mod_events_activating">
Activating Events</a></h2>
To activate events, an UDP packet has to be send to port 54124 of the Modtronix SBC68EC Web Server by a remote client. The first two bytes of this packet must be an uppercase hex value indicating which ports are to be enabled. Each bit in the byte represents an Event Port. Bit 0 represents the UDP event port, bits 1 to 7 are reserved for future use. For example, to enable the UDP event port, 01 must be sent to port 54124. After receiving this UDP packet, the Modtronix SBC68EC Web Server will start streaming events back to the sender.<h2><a class="anchor" name="mod_events_current">
Supported Events</a></h2>
Currently the following events are supported:  
<table class=compactTable cellpadding=2 cellspacing=0 border=1>
<tr width="100%"><td align="center"><i><b>Event Name</b></i></td><td align="center"><i><b>Format</b></i></td><td align="center"><i><b>Description</b></i></td></tr>
<tr><td><b>Heartbeat Event</b></td> <td><code>l40=2;</code></td>
    <td>Every second a heartbeat event is sent. The format is "l40=2;". As long as the remote client
    receives this event (in a UDP packet) each second, it knows the server is still alive, and will sent it any events that arise.</td>
</tr>
<tr><td><b>Serial LCD 1 Key Event</b></td> <td><code>l34=x;</code></td>
    <td>If a serial LCD display (I2C address 80) is connected to the I2C port of the @boardname, an event will be sent
    each time a key is pressed (LCD display can have a keyboard connected to it). The x part of the event is the key code, and is a character from 'a' to 'p' (one 
    of 16 possible keys).</td>
</tr>
<tr><td><b>Serial LCD 2 Key Event</b></td> <td><code>l35=x;</code></td>
    <td>Same as <i>Serial LCD 1 Key Event</i>, but for LCD display with I2C address 81.</td>
</tr>
<tr><td><b>Serial LCD 3 Key Event</b></td> <td><code>l36=x;</code></td>
    <td>Same as <i>Serial LCD 1 Key Event</i>, but for LCD display with I2C address 82.</td>
</tr>
<tr><td><b>Serial LCD 4 Key Event</b></td> <td><code>l37=x;</code></td>
    <td>Same as <i>Serial LCD 1 Key Event</i>, but for LCD display with I2C address 83.</td>
</tr>
</table>
<p>
The following events are sent if an <b>expansion board</b> (like the IOR5E or MXD2R) is present:  
<table class=compactTable cellpadding=2 cellspacing=0 border=1>
<tr width="100%"><td align="center"><i><b>Event Name</b></i></td><td align="center"><i><b>Format</b></i></td><td align="center"><i><b>Description</b></i></td></tr>
<tr><td><b>Expansion Board Input 1 Event</b></td> <td><code>x40=x;</code></td>
    <td>If the expansion board has an Input 1, this event is sent if this input changes. The event is "x40=0;" if the input is 0,
    or "x40=1" if the input is 1.</td>
</tr>
<tr><td><b>Expansion Board Input 2 Event</b></td> <td><code>x41=x;</code></td>
    <td>Same as <i>Expansion Board Input 1 Event</i>, but for Input 2.</td>
</tr>
<tr><td><b>Expansion Board Input 3 Event</b></td> <td><code>x42=x;</code></td>
    <td>Same as <i>Expansion Board Input 1 Event</i>, but for Input 3.</td>
</tr>
<tr><td><b>Expansion Board Input 4 Event</b></td> <td><code>x43=x;</code></td>
    <td>Same as <i>Expansion Board Input 1 Event</i>, but for Input 4.</td>
</tr>
<tr><td><b>Expansion Board Input 5 Event</b></td> <td><code>x44=x;</code></td>
    <td>Same as <i>Expansion Board Input 1 Event</i>, but for Input 5.</td>
</tr>
<tr><td><b>Expansion Board Input 6 Event</b></td> <td><code>x45=x;</code></td>
    <td>Same as <i>Expansion Board Input 1 Event</i>, but for Input 6.</td>
</tr>
<tr><td><b>Expansion Board Opto Coupler Input 1 Event</b></td> <td><code>x20=x;</code></td>
    <td>If the expansion board has an Opto Coupler Input 1, this event is sent if this input changes. The event is "x20=0;" if the input is off,
    or "x20=1" if the input is active.</td>
</tr>
<tr><td><b>Expansion Board Opto Coupler Input 2 Event</b></td> <td><code>x21=x;</code></td>
    <td>Same as <i>Expansion Board Opto Coupler Input 1 Event</i>, but for Input 2.</td>
</tr>
<tr><td><b>Expansion Board Opto Coupler Input 3 Event</b></td> <td><code>x21=x;</code></td>
    <td>Same as <i>Expansion Board Opto Coupler Input 1 Event</i>, but for Input 3.</td>
</tr>
<tr><td><b>Expansion Board Opto Coupler Input 4 Event</b></td> <td><code>x21=x;</code></td>
    <td>Same as <i>Expansion Board Opto Coupler Input 1 Event</i>, but for Input 4.</td>
</tr>
</table>
 </div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri May 14 08:54:23 2010 for SBC68EC Web Server by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
