<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>SBC68EC Web Server: buses.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>buses.h File Reference</h1>Serial Buses.  
<a href="#_details">More...</a>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___b_u_s___b_u_f_f_e_r.html">_BUS_BUFFER</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___b_u_s_e_s___i_n_f_o.html">_BUSES_INFO</a></td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#e98a68a2891872c2a42b91ad5b74ccb0">BUFTYPE</a>&nbsp;&nbsp;&nbsp;<a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#d18ca4d5520d2988f1d9e8e43744287a">BUS_COUNT</a>&nbsp;&nbsp;&nbsp;(BUSID_MAX)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#4c5b575f5ce896303e57c0091fa683a2">BUSBUFFER_SIZE</a>&nbsp;&nbsp;&nbsp;512ul</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#2a5e9ffd7471d26eedb29c8c69595836">busDisabled</a>(busId)&nbsp;&nbsp;&nbsp;(busInfo.stat[busId] &amp;= ~BUSSTAT_ENABLED)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#5ea0d8df64c0d2034343a7cb73474098">busEmptyRxBuf</a>(busId)&nbsp;&nbsp;&nbsp;{busInfo.buf[busId].getRx = busInfo.buf[busId].putRx = busInfo.buf[busId].rxCount = 0;}</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#f2ed17e2e9ecdf5a881e417e092094f9">busEmptyTxBuf</a>(busId)&nbsp;&nbsp;&nbsp;{busInfo.buf[busId].getTx = busInfo.buf[busId].putTx = busInfo.buf[busId].txCount = 0;}</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#25ae17a6e1d3581456040fbc86810f8d">busEnable</a>(busId)&nbsp;&nbsp;&nbsp;(busInfo.stat[busId] |= BUSSTAT_ENABLED)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#247814d989e5266afc146790dd4b916d">busGetRxBufCount</a>(busId)&nbsp;&nbsp;&nbsp;(busInfo.buf[busId].rxCount)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#0831c2d16a1229aa2cf93b7147bfe7f8">busGetStat</a>(busId)&nbsp;&nbsp;&nbsp;(busInfo.stat[busId])</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#51d0d83e3606d9a9efefcf27d0b8c009">busGetTxBufCount</a>(busId)&nbsp;&nbsp;&nbsp;(busInfo.buf[busId].txCount)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#b859cb5ebfae5fbec883e65c647fe161">busIsEnabled</a>(busId)&nbsp;&nbsp;&nbsp;(busInfo.stat[busId] &amp; BUSSTAT_ENABLED)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#b5b07128258df0b1314661e2443bae27">busIsRxBufEmpty</a>(busId)&nbsp;&nbsp;&nbsp;(busInfo.buf[busId].rxCount == 0)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#52e388df80af84db445bb18723583548">busIsRxBufFull</a>(busId)&nbsp;&nbsp;&nbsp;(busInfo.buf[busId].rxCount == busInfo.buf[busId].rxBufSize)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#db04e06f1d9a0b029ae8824ad93c2b32">busIsTxBufEmpty</a>(busId)&nbsp;&nbsp;&nbsp;(busInfo.buf[busId].txCount == 0)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#9a1c9cf8bb84a5e8083612273e953e31">busIsTxBufFull</a>(busId)&nbsp;&nbsp;&nbsp;(busInfo.buf[busId].txCount == busInfo.buf[busId].txBufSize)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#9ed5feed33612ba5b11d61f5810c52b4">busIsTxing</a>(busId)&nbsp;&nbsp;&nbsp;(busInfo.stat[busId] &amp; BUSSTAT_TXING)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#a8bdcfa4c7ccb773de87f71d6b22f10a">busPeekByteRxBuf</a>(busId)&nbsp;&nbsp;&nbsp;(*(busInfo.buf[busId].rxBuf + busInfo.buf[busId].getRx))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#98717bad0f6775b8b1935a2939d0ef47">busPeekByteTxBuf</a>(busId)&nbsp;&nbsp;&nbsp;(*(busInfo.buf[busId].txBuf + busInfo.buf[busId].getTx))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#6e43e7662443772b470288bc96dd1a93">busPutByteRxBuf</a>(busId, b)&nbsp;&nbsp;&nbsp;{*(busInfo.buf[busId].rxBuf + busInfo.buf[busId].putRx) = b; /* Write byte to buf */ if((++busInfo.buf[busId].putRx)==busInfo.buf[busId].rxBufSize) {busInfo.buf[busId].putRx = 0;} busInfo.buf[busId].rxCount++; /*One more byte available in buffer*/}</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#7365963d6edb3bedda6b76182415e49b">busPutByteTxBuf</a>(busId, b)&nbsp;&nbsp;&nbsp;{*(busInfo.buf[busId].txBuf + busInfo.buf[busId].putTx) = b; /* Write byte to buf */ if((++busInfo.buf[busId].putTx)==busInfo.buf[busId].txBufSize) {busInfo.buf[busId].putTx = 0;} busInfo.buf[busId].txCount++; /*One more byte available in buffer*/}</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#cb1c7d4c8189ea2ece22677608002e8a">busRemoveByteRxBuf</a>(busId)&nbsp;&nbsp;&nbsp;{ if((++busInfo.buf[busId].getRx)==busInfo.buf[busId].rxBufSize) {busInfo.buf[busId].getRx = 0;} busInfo.buf[busId].rxCount--; /*Update available data left in rx buffer*/}</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#3d6858d00b81f4d64d0d3a7478fca526">busRemoveByteTxBuf</a>(busId)&nbsp;&nbsp;&nbsp;{ if((++busInfo.buf[busId].getTx)==busInfo.buf[busId].txBufSize) {busInfo.buf[busId].getTx = 0;} busInfo.buf[busId].txCount--; /*Update available data left in tx buffer*/}</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#5e85eaa2cd10fac23af1e5d8be9e1681">busRxBufHasData</a>(busId)&nbsp;&nbsp;&nbsp;(busInfo.buf[busId].rxCount != 0)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#72ee148e076596baf97757c2621a57e2">busRxBufNotFull</a>(busId)&nbsp;&nbsp;&nbsp;(busInfo.buf[busId].rxCount != busInfo.buf[busId].rxBufSize)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#74aa633f4bbab4516e74fd4a30984ed6">BUSSTAT_ENABLED</a>&nbsp;&nbsp;&nbsp;0x80</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#93975f7af52c6ff8ae97f948f57cfe3a">BUSSTAT_RX_OVERRUN</a>&nbsp;&nbsp;&nbsp;0x10</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#c19ca05e37e8312f73cb73e2ed96dcb2">BUSSTAT_TX_OVERRUN</a>&nbsp;&nbsp;&nbsp;0x01</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#74d69749323034f04c6b62bd26cd8623">BUSSTAT_TXING</a>&nbsp;&nbsp;&nbsp;0x02</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#cbc2c0fed3368c7a7f36637f1702e7c9">BUSSTAT_UDP_ENABLE</a>&nbsp;&nbsp;&nbsp;0x01</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#f8883f609565f9ed0a4686369c97e08e">busStatClearOverrun</a>(busId)&nbsp;&nbsp;&nbsp;(busInfo.stat[busId] &amp;= (~(BUSSTAT_TX_OVERRUN | BUSSTAT_RX_OVERRUN)) )</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#de758d9487fbe3deb8583bc8eb18ea39">busTxBufHasData</a>(busId)&nbsp;&nbsp;&nbsp;(busInfo.buf[busId].txCount != 0)</td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef struct <a class="el" href="struct___b_u_s___b_u_f_f_e_r.html">_BUS_BUFFER</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#87402049909c3b77188f38536130a4e0">BUS_BUFFER</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef struct <a class="el" href="struct___b_u_s_e_s___i_n_f_o.html">_BUSES_INFO</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#3ee55c37feefe752558e539a7794d2d2">BUS_INFO</a></td></tr>

<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#f233d47b7bb72fb3c01e0f8e2ce2fc1a">BUSES</a> { <br>
&nbsp;&nbsp;<a class="el" href="buses_8h.html#f233d47b7bb72fb3c01e0f8e2ce2fc1aca53920770d011523cd12da1b6b7ae56">BUSID_SER1</a> =  0, 
<a class="el" href="buses_8h.html#f233d47b7bb72fb3c01e0f8e2ce2fc1a34b25a5c7a01e6762cdb2f823d6dfd28">BUSID_SER2</a>, 
<a class="el" href="buses_8h.html#f233d47b7bb72fb3c01e0f8e2ce2fc1ace997bc26fa60eed6c91082edd3f4798">BUSID_I2C1</a>, 
<a class="el" href="buses_8h.html#f233d47b7bb72fb3c01e0f8e2ce2fc1a6c20fdf81d456778910a88fc6bffbb8d">BUSID_SPI1</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="buses_8h.html#f233d47b7bb72fb3c01e0f8e2ce2fc1ae7f8aa1eb964029b5ff758e648370401">BUSID_MAX</a>
<br>
 }</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#23c7ce8a1682b59aa625bd198637f4cb">busGetByteRxBuf</a> (<a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a> busId)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#556fa0650cdf6ddc83bba71db8410182">busGetByteTxBuf</a> (<a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a> busId)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#5b14fcb27d7cefa0d84aca61d913ede9">busInfoInit</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#156f8d89e8d938c0b91ed0616da9e89c">busInit</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#5770a3cdf635f19098c1ef799e9caff0">busNetInit</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#fea676742cf4f93c7f986438e51569cd">busPeekByteRxBufAt</a> (<a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a> busId, <a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a> offset)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#3ee8284ce24481ae00710fd42094c32b">busPeekByteTxBufAt</a> (<a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a> busId, <a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a> offset)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#b99cabe80c12fa9d781ce84dbd637d76">busService</a> (<a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a> busId)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#d2cd5dfdb4ed059edc82b9b8f1ff3860">busTask</a> (void)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct___b_u_s_e_s___i_n_f_o.html">BUS_INFO</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buses_8h.html#8ee70aa7c20d15845839b0ca20d3680d">busInfo</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Serial Buses. 
<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd><a href="www.modtronix.com">Modtronix Engineering</a> </dd></dl>
<dl class="user" compact><dt><b>Dependencies: </b></dt><dd><ul>
<li></li></ul>
</dd></dl>
<dl class="user" compact><dt><b>Compiler: </b></dt><dd>MPLAB C18 v2.10 or higher <br>
 HITECH PICC-18 V8.35PL3 or higher</dd></dl>
<h2><a class="anchor" name="description">
Description</a></h2>
This module contains code for implementing different serial buses.<h2><a class="anchor" name="buses_conf">
Configuration</a></h2>
The following defines are used to configure this module, and should be placed in the <a class="el" href="projdefs_8h.html" title="Project configuration.">projdefs.h</a> (or similar) file. For details, see <a class="el" href="group__mod__conf__projdefs.html">Project Configuration</a>. To configure the module, the required defines should be uncommended, and the rest commented out. <div class="fragment"><pre class="fragment"> <span class="comment">//*********************************************************************</span>
 <span class="comment">//--------------------  Buses Configuration --------------------</span>
 <span class="comment">//*********************************************************************</span>
 <span class="comment">//The default UDP port to use for the UDP 1 Port.</span>
 <span class="comment">//#define DEFAULT_BUS_UDP1PORT  (54125ul)</span>
 <span class="comment">//</span>
 <span class="comment">//The default UDP port to use for the UDP 2 Port.</span>
 <span class="comment">//#define DEFAULT_BUS_UDP2PORT  (54126ul)</span>
 <span class="comment">//</span>
 <span class="comment">//UDP1 Port</span>
 <span class="comment">//#define BUS_UDP1PORT DEFAULT_BUS_UDP1PORT</span>
 <span class="comment">//</span>
 <span class="comment">//UDP2 Port</span>
 <span class="comment">//#define BUS_UDP2PORT DEFAULT_BUS_UDP2PORT</span>
 <span class="comment">//</span>
 <span class="comment">//Serial Port 1 buffer sizes</span>
 <span class="comment">//#define BUS_SER1_TXBUFSIZE   50</span>
 <span class="comment">//#define BUS_SER1_RXBUFSIZE   100</span>
 <span class="comment">//</span>
 <span class="comment">//Serial Port 2 buffer sizes</span>
 <span class="comment">//#define BUS_SER2_TXBUFSIZE   20</span>
 <span class="comment">//#define BUS_SER2_RXBUFSIZE   20</span>
 <span class="comment">//</span>
 <span class="comment">//I2C Port 1 buffer sizes</span>
 <span class="comment">//#define BUS_I2C1_TXBUFSIZE   100</span>
 <span class="comment">//#define BUS_I2C1_RXBUFSIZE   20</span>
 <span class="comment">//</span>
 <span class="comment">//SPI Port 1 buffer sizes</span>
 <span class="comment">//#define BUS_SPI1_TXBUFSIZE   20</span>
 <span class="comment">//#define BUS_SPI1_RXBUFSIZE   20</span>
 <span class="comment">//</span>
</pre></div><p>
<dl class="author" compact><dt><b>Author:</b></dt><dd><a href="www.modtronix.com">Modtronix Engineering</a> </dd></dl>
<dl class="user" compact><dt><b>Dependencies: </b></dt><dd><ul>
<li></li></ul>
</dd></dl>
<dl class="user" compact><dt><b>Compiler: </b></dt><dd>MPLAB C18 v2.10 or higher <br>
 HITECH PICC-18 V8.35PL3 or higher</dd></dl>
<h2><a class="anchor" name="description">
Description</a></h2>
This module contains code for implementing different serial buses.<h2><a class="anchor" name="buses_conf">
Configuration</a></h2>
The following defines are used to configure this module, and should be placed in the <a class="el" href="projdefs_8h.html" title="Project configuration.">projdefs.h</a> (or similar) file. For details, see <a class="el" href="group__mod__conf__projdefs.html">Project Configuration</a>. To configure the module, the required defines should be uncommended, and the rest commented out. <div class="fragment"><pre class="fragment"> <span class="comment">//*********************************************************************</span>
 <span class="comment">//--------------------  Buses Configuration --------------------</span>
 <span class="comment">//*********************************************************************</span>
 <span class="comment">//Default "UDP Command Port"</span>
 <span class="comment">//#define DEFAULT_CMD_UDPPORT (54123)</span>
</pre></div> <hr><h2>Define Documentation</h2>
<a class="anchor" name="e98a68a2891872c2a42b91ad5b74ccb0"></a><!-- doxytag: member="buses.h::BUFTYPE" ref="e98a68a2891872c2a42b91ad5b74ccb0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BUFTYPE&nbsp;&nbsp;&nbsp;<a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="d18ca4d5520d2988f1d9e8e43744287a"></a><!-- doxytag: member="buses.h::BUS_COUNT" ref="d18ca4d5520d2988f1d9e8e43744287a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BUS_COUNT&nbsp;&nbsp;&nbsp;(BUSID_MAX)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The number of buses 
</div>
</div><p>
<a class="anchor" name="4c5b575f5ce896303e57c0091fa683a2"></a><!-- doxytag: member="buses.h::BUSBUFFER_SIZE" ref="4c5b575f5ce896303e57c0091fa683a2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BUSBUFFER_SIZE&nbsp;&nbsp;&nbsp;512ul          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="2a5e9ffd7471d26eedb29c8c69595836"></a><!-- doxytag: member="buses.h::busDisabled" ref="2a5e9ffd7471d26eedb29c8c69595836" args="(busId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define busDisabled          </td>
          <td>(</td>
          <td class="paramtype">busId&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(busInfo.stat[busId] &amp;= ~BUSSTAT_ENABLED)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Disaable the given bus.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus ID of the requested bus. Is a BUSID_XXX variable </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="5ea0d8df64c0d2034343a7cb73474098"></a><!-- doxytag: member="buses.h::busEmptyRxBuf" ref="5ea0d8df64c0d2034343a7cb73474098" args="(busId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define busEmptyRxBuf          </td>
          <td>(</td>
          <td class="paramtype">busId&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;{busInfo.buf[busId].getRx = busInfo.buf[busId].putRx = busInfo.buf[busId].rxCount = 0;}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Empty the given buses receive buffer. Any data contained in the receive buffer is lost.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus whos receive buffer has to be cleared. Is a BUSID_XXX variable </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="f2ed17e2e9ecdf5a881e417e092094f9"></a><!-- doxytag: member="buses.h::busEmptyTxBuf" ref="f2ed17e2e9ecdf5a881e417e092094f9" args="(busId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define busEmptyTxBuf          </td>
          <td>(</td>
          <td class="paramtype">busId&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;{busInfo.buf[busId].getTx = busInfo.buf[busId].putTx = busInfo.buf[busId].txCount = 0;}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Empty the given buses transmit buffer. Any data contained in the transmit buffer is lost.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus whos transmit buffer has to be cleared. Is a BUSID_XXX variable </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="25ae17a6e1d3581456040fbc86810f8d"></a><!-- doxytag: member="buses.h::busEnable" ref="25ae17a6e1d3581456040fbc86810f8d" args="(busId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define busEnable          </td>
          <td>(</td>
          <td class="paramtype">busId&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(busInfo.stat[busId] |= BUSSTAT_ENABLED)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Enable the given bus.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus ID of the requested bus. Is a BUSID_XXX variable </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="247814d989e5266afc146790dd4b916d"></a><!-- doxytag: member="buses.h::busGetRxBufCount" ref="247814d989e5266afc146790dd4b916d" args="(busId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define busGetRxBufCount          </td>
          <td>(</td>
          <td class="paramtype">busId&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(busInfo.buf[busId].rxCount)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets number of bytes available in Receive buffer.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus ID of the requested bus. Is a BUSID_XXX variable</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns number of bytes available to read or peek in Receive buffer. </dd></dl>

</div>
</div><p>
<a class="anchor" name="0831c2d16a1229aa2cf93b7147bfe7f8"></a><!-- doxytag: member="buses.h::busGetStat" ref="0831c2d16a1229aa2cf93b7147bfe7f8" args="(busId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define busGetStat          </td>
          <td>(</td>
          <td class="paramtype">busId&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(busInfo.stat[busId])</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Reads a byte from the given bus's receive buffer. Ensure that the bus has data before calling this function! The read byte is removed from the buses receive buffer.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus ID of the requested bus. Is a BUSID_XXX variable</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns the next byte from the given bus's RX buffer. Get the current status of this module. Use the <a class="el" href="buses_8h.html#f8883f609565f9ed0a4686369c97e08e">busStatClearOverrun()</a> function to clear the overrun flags if required. This byte contains the following flags:<ul>
<li>BUSSTAT_TX_OVERRUN</li><li>BUSSTAT_RX_OVERRUN</li></ul>
</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus ID of the requested bus. Is a BUSID_XXX variable</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The status of this module. Consists out of SER_STAT_XXX flags </dd></dl>

</div>
</div><p>
<a class="anchor" name="51d0d83e3606d9a9efefcf27d0b8c009"></a><!-- doxytag: member="buses.h::busGetTxBufCount" ref="51d0d83e3606d9a9efefcf27d0b8c009" args="(busId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define busGetTxBufCount          </td>
          <td>(</td>
          <td class="paramtype">busId&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(busInfo.buf[busId].txCount)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets number of bytes available in Transmit buffer.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus ID of the requested bus. Is a BUSID_XXX variable</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns number of bytes available in Transmit buffer to send of peek. </dd></dl>

</div>
</div><p>
<a class="anchor" name="b859cb5ebfae5fbec883e65c647fe161"></a><!-- doxytag: member="buses.h::busIsEnabled" ref="b859cb5ebfae5fbec883e65c647fe161" args="(busId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define busIsEnabled          </td>
          <td>(</td>
          <td class="paramtype">busId&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(busInfo.stat[busId] &amp; BUSSTAT_ENABLED)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Indicates if this bus is enabled.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus ID of the requested bus. Is a BUSID_XXX variable</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>True if the given bus is enabled, else false. </dd></dl>

</div>
</div><p>
<a class="anchor" name="b5b07128258df0b1314661e2443bae27"></a><!-- doxytag: member="buses.h::busIsRxBufEmpty" ref="b5b07128258df0b1314661e2443bae27" args="(busId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define busIsRxBufEmpty          </td>
          <td>(</td>
          <td class="paramtype">busId&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(busInfo.buf[busId].rxCount == 0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Checks if the given bus's receive buffer is empty - it has no pending data in it's receive buffer.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus ID of the requested bus. Is a BUSID_XXX variable</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns true if the given bus's RX buffer is empty. Else, returns false. </dd></dl>

</div>
</div><p>
<a class="anchor" name="52e388df80af84db445bb18723583548"></a><!-- doxytag: member="buses.h::busIsRxBufFull" ref="52e388df80af84db445bb18723583548" args="(busId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define busIsRxBufFull          </td>
          <td>(</td>
          <td class="paramtype">busId&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(busInfo.buf[busId].rxCount == busInfo.buf[busId].rxBufSize)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Checks if the given bus's receive buffer is full - no more space for adding data.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus ID of the requested bus. Is a BUSID_XXX variable</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns true if the given bus's RX buffer is full. Else, returns false. </dd></dl>

</div>
</div><p>
<a class="anchor" name="db04e06f1d9a0b029ae8824ad93c2b32"></a><!-- doxytag: member="buses.h::busIsTxBufEmpty" ref="db04e06f1d9a0b029ae8824ad93c2b32" args="(busId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define busIsTxBufEmpty          </td>
          <td>(</td>
          <td class="paramtype">busId&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(busInfo.buf[busId].txCount == 0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Checks if the given bus's transmit buffer is empty - it has nothing to transmit.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus ID of the requested bus. Is a BUSID_XXX variable</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns true if the given bus's TX buffer is empty. Else, returns false. </dd></dl>

</div>
</div><p>
<a class="anchor" name="9a1c9cf8bb84a5e8083612273e953e31"></a><!-- doxytag: member="buses.h::busIsTxBufFull" ref="9a1c9cf8bb84a5e8083612273e953e31" args="(busId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define busIsTxBufFull          </td>
          <td>(</td>
          <td class="paramtype">busId&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(busInfo.buf[busId].txCount == busInfo.buf[busId].txBufSize)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Checks if the given bus's transmit buffer is full - no more space for adding data.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus ID of the requested bus. Is a BUSID_XXX variable</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns true if the given bus's TX buffer is full. Else, returns false. </dd></dl>

</div>
</div><p>
<a class="anchor" name="9ed5feed33612ba5b11d61f5810c52b4"></a><!-- doxytag: member="buses.h::busIsTxing" ref="9ed5feed33612ba5b11d61f5810c52b4" args="(busId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define busIsTxing          </td>
          <td>(</td>
          <td class="paramtype">busId&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(busInfo.stat[busId] &amp; BUSSTAT_TXING)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Indicates if this bus is currently transmitting - returns the status of the BUSSTAT_TX flag. For interrupt driven buses, this means that a transmit interrupt can occur at any time, and clear this flag.<p>
When checking if the bus is transmitting, it should be remembered that a transmit interrupt can occur at any time, and clear the trasmitting flag. This means that if this function returns true, it could change to false (transmit interrupt occurs) by the time we receive the true reply. To prevent this, this function should be called in a critical section, so that no interrupt can occur while calling it.<p>
When checking if the bus is NOT transmitting, it does not have to be performed in a critical section. Not transmitting, means no transmit interrupt can occur and change this flag.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus ID of the requested bus. Is a BUSID_XXX variable</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>True if the given bus is currently transmitting, else false. </dd></dl>

</div>
</div><p>
<a class="anchor" name="a8bdcfa4c7ccb773de87f71d6b22f10a"></a><!-- doxytag: member="buses.h::busPeekByteRxBuf" ref="a8bdcfa4c7ccb773de87f71d6b22f10a" args="(busId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define busPeekByteRxBuf          </td>
          <td>(</td>
          <td class="paramtype">busId&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(*(busInfo.buf[busId].rxBuf + busInfo.buf[busId].getRx))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets a byte from the RX Buffer, without removing it. The byte is NOT removed from the buffer, and the buffer pointers are NOT updated! To remove the byte, and update the pointers, call the <a class="el" href="buses_8h.html#cb1c7d4c8189ea2ece22677608002e8a">busRemoveByteRxBuf()</a> function.<p>
<dl class="user" compact><dt><b>Pre-Condition:</b></dt><dd><a class="el" href="buses_8h.html#b5b07128258df0b1314661e2443bae27">busIsRxBufEmpty()</a> must have been called to confirm the RX Buffer has data!</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus ID of the requested bus. Is a BUSID_XXX variable</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns the next byte in the given bus's RX buffer. </dd></dl>

</div>
</div><p>
<a class="anchor" name="98717bad0f6775b8b1935a2939d0ef47"></a><!-- doxytag: member="buses.h::busPeekByteTxBuf" ref="98717bad0f6775b8b1935a2939d0ef47" args="(busId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define busPeekByteTxBuf          </td>
          <td>(</td>
          <td class="paramtype">busId&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(*(busInfo.buf[busId].txBuf + busInfo.buf[busId].getTx))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets a byte from the TX Buffer, without removing it. The byte is NOT removed from the buffer, and the buffer pointers are NOT updated! To remove the byte, and update the pointers, call the <a class="el" href="buses_8h.html#3d6858d00b81f4d64d0d3a7478fca526">busRemoveByteTxBuf()</a> function.<p>
<dl class="user" compact><dt><b>Pre-Condition:</b></dt><dd><a class="el" href="buses_8h.html#db04e06f1d9a0b029ae8824ad93c2b32">busIsTxBufEmpty()</a> must have been called to confirm the TX Buffer has data!</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus ID of the requested bus. Is a BUSID_XXX variable</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns the next byte in the given bus's TX buffer. </dd></dl>

</div>
</div><p>
<a class="anchor" name="6e43e7662443772b470288bc96dd1a93"></a><!-- doxytag: member="buses.h::busPutByteRxBuf" ref="6e43e7662443772b470288bc96dd1a93" args="(busId, b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define busPutByteRxBuf          </td>
          <td>(</td>
          <td class="paramtype">busId,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">b&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;{*(busInfo.buf[busId].rxBuf + busInfo.buf[busId].putRx) = b; /* Write byte to buf */ if((++busInfo.buf[busId].putRx)==busInfo.buf[busId].rxBufSize) {busInfo.buf[busId].putRx = 0;} busInfo.buf[busId].rxCount++; /*One more byte available in buffer*/}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Adds a byte to the RX Buffer, and updates the buffer pointers.<p>
<dl class="user" compact><dt><b>Pre-Condition:</b></dt><dd><a class="el" href="buses_8h.html#52e388df80af84db445bb18723583548">busIsRxBufFull()</a> must have been called to confirm the RX Buffer is not full!</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus ID of the requested bus. Is a BUSID_XXX variable </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>b</em>&nbsp;</td><td>Byte to add to the buffer </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="7365963d6edb3bedda6b76182415e49b"></a><!-- doxytag: member="buses.h::busPutByteTxBuf" ref="7365963d6edb3bedda6b76182415e49b" args="(busId, b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define busPutByteTxBuf          </td>
          <td>(</td>
          <td class="paramtype">busId,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">b&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;{*(busInfo.buf[busId].txBuf + busInfo.buf[busId].putTx) = b; /* Write byte to buf */ if((++busInfo.buf[busId].putTx)==busInfo.buf[busId].txBufSize) {busInfo.buf[busId].putTx = 0;} busInfo.buf[busId].txCount++; /*One more byte available in buffer*/}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Adds a byte to the TX Buffer, and updates the buffer pointers.<p>
<dl class="user" compact><dt><b>Pre-Condition:</b></dt><dd><a class="el" href="buses_8h.html#9a1c9cf8bb84a5e8083612273e953e31">busIsTxBufFull()</a> must have been called to confirm the TX Buffer is not full!</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus ID of the requested bus. Is a BUSID_XXX variable </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>b</em>&nbsp;</td><td>Byte to add to the buffer </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="cb1c7d4c8189ea2ece22677608002e8a"></a><!-- doxytag: member="buses.h::busRemoveByteRxBuf" ref="cb1c7d4c8189ea2ece22677608002e8a" args="(busId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define busRemoveByteRxBuf          </td>
          <td>(</td>
          <td class="paramtype">busId&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;{ if((++busInfo.buf[busId].getRx)==busInfo.buf[busId].rxBufSize) {busInfo.buf[busId].getRx = 0;} busInfo.buf[busId].rxCount--; /*Update available data left in rx buffer*/}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Removes a byte from the Receive Buffer.<p>
<dl class="user" compact><dt><b>Pre-Condition:</b></dt><dd>Before calling this function, it must be confirmed that the Receive buffer has data. The <a class="el" href="buses_8h.html#b5b07128258df0b1314661e2443bae27">busIsRxBufEmpty()</a> is an example function that can be used to do this check.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus ID of the requested bus. Is a BUSID_XXX variable </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="3d6858d00b81f4d64d0d3a7478fca526"></a><!-- doxytag: member="buses.h::busRemoveByteTxBuf" ref="3d6858d00b81f4d64d0d3a7478fca526" args="(busId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define busRemoveByteTxBuf          </td>
          <td>(</td>
          <td class="paramtype">busId&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;{ if((++busInfo.buf[busId].getTx)==busInfo.buf[busId].txBufSize) {busInfo.buf[busId].getTx = 0;} busInfo.buf[busId].txCount--; /*Update available data left in tx buffer*/}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Removes a byte from the Transmit Buffer.<p>
<dl class="user" compact><dt><b>Pre-Condition:</b></dt><dd>Before calling this function, it must be confirmed that the Transmit buffer has data. The <a class="el" href="buses_8h.html#db04e06f1d9a0b029ae8824ad93c2b32">busIsTxBufEmpty()</a> is an example function that can be used to do this check.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus ID of the requested bus. Is a BUSID_XXX variable </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="5e85eaa2cd10fac23af1e5d8be9e1681"></a><!-- doxytag: member="buses.h::busRxBufHasData" ref="5e85eaa2cd10fac23af1e5d8be9e1681" args="(busId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define busRxBufHasData          </td>
          <td>(</td>
          <td class="paramtype">busId&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(busInfo.buf[busId].rxCount != 0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Checks if the given bus's receive buffer contains data.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus ID of the requested bus. Is a BUSID_XXX variable</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns true if the given bus's RX buffer has data. </dd></dl>

</div>
</div><p>
<a class="anchor" name="72ee148e076596baf97757c2621a57e2"></a><!-- doxytag: member="buses.h::busRxBufNotFull" ref="72ee148e076596baf97757c2621a57e2" args="(busId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define busRxBufNotFull          </td>
          <td>(</td>
          <td class="paramtype">busId&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(busInfo.buf[busId].rxCount != busInfo.buf[busId].rxBufSize)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Checks if the given bus's receive buffer still has space - more space for adding data.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus ID of the requested bus. Is a BUSID_XXX variable</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns true if the given bus's RX buffer is not full. Else, returns false. </dd></dl>

</div>
</div><p>
<a class="anchor" name="74aa633f4bbab4516e74fd4a30984ed6"></a><!-- doxytag: member="buses.h::BUSSTAT_ENABLED" ref="74aa633f4bbab4516e74fd4a30984ed6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BUSSTAT_ENABLED&nbsp;&nbsp;&nbsp;0x80          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The buffer is enabled 
</div>
</div><p>
<a class="anchor" name="93975f7af52c6ff8ae97f948f57cfe3a"></a><!-- doxytag: member="buses.h::BUSSTAT_RX_OVERRUN" ref="93975f7af52c6ff8ae97f948f57cfe3a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BUSSTAT_RX_OVERRUN&nbsp;&nbsp;&nbsp;0x10          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The transmit buffer has overrun. Must be cleared by the user with <a class="el" href="buses_8h.html#f8883f609565f9ed0a4686369c97e08e">busStatClearOverrun()</a> function. 
</div>
</div><p>
<a class="anchor" name="c19ca05e37e8312f73cb73e2ed96dcb2"></a><!-- doxytag: member="buses.h::BUSSTAT_TX_OVERRUN" ref="c19ca05e37e8312f73cb73e2ed96dcb2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BUSSTAT_TX_OVERRUN&nbsp;&nbsp;&nbsp;0x01          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The transmit buffer has overrun. Must be cleared by the user with <a class="el" href="buses_8h.html#f8883f609565f9ed0a4686369c97e08e">busStatClearOverrun()</a> function. 
</div>
</div><p>
<a class="anchor" name="74d69749323034f04c6b62bd26cd8623"></a><!-- doxytag: member="buses.h::BUSSTAT_TXING" ref="74d69749323034f04c6b62bd26cd8623" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BUSSTAT_TXING&nbsp;&nbsp;&nbsp;0x02          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Indicates if this bus is currently transmitting. For interrupt driven buses, this means that a transmit interrupt can occur at any time. Checking this function should be performed in a critical section, so that no interrupt can occur while checking! 
</div>
</div><p>
<a class="anchor" name="cbc2c0fed3368c7a7f36637f1702e7c9"></a><!-- doxytag: member="buses.h::BUSSTAT_UDP_ENABLE" ref="cbc2c0fed3368c7a7f36637f1702e7c9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BUSSTAT_UDP_ENABLE&nbsp;&nbsp;&nbsp;0x01          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="f8883f609565f9ed0a4686369c97e08e"></a><!-- doxytag: member="buses.h::busStatClearOverrun" ref="f8883f609565f9ed0a4686369c97e08e" args="(busId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define busStatClearOverrun          </td>
          <td>(</td>
          <td class="paramtype">busId&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(busInfo.stat[busId] &amp;= (~(BUSSTAT_TX_OVERRUN | BUSSTAT_RX_OVERRUN)) )</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the current status of this module. The following flags are cleared during this function:<ul>
<li>BUSSTAT_TX_OVERRUN</li><li>BUSSTAT_RX_OVERRUN</li></ul>
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus ID of the requested bus. Is a BUSID_XXX variable</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The status of this module. Consists out of SER_STAT_XXX flags </dd></dl>

</div>
</div><p>
<a class="anchor" name="de758d9487fbe3deb8583bc8eb18ea39"></a><!-- doxytag: member="buses.h::busTxBufHasData" ref="de758d9487fbe3deb8583bc8eb18ea39" args="(busId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define busTxBufHasData          </td>
          <td>(</td>
          <td class="paramtype">busId&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(busInfo.buf[busId].txCount != 0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Checks if the given bus's transmit buffer contains data.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus ID of the requested bus. Is a BUSID_XXX variable</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns true if the given bus's TX buffer has data. </dd></dl>

</div>
</div><p>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="87402049909c3b77188f38536130a4e0"></a><!-- doxytag: member="buses.h::BUS_BUFFER" ref="87402049909c3b77188f38536130a4e0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct___b_u_s___b_u_f_f_e_r.html">_BUS_BUFFER</a>  <a class="el" href="struct___b_u_s___b_u_f_f_e_r.html">BUS_BUFFER</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Structure containing buffer data for a single bus.<p>
The "txCount" member gives the number of entries currently contained in the buffer. It is also used to indicate when the buffer is emptey: txCount == 0.<p>
To test if the buffer is full, check if txCount == txBufSize<p>
DO NOT use putTx == putTx to test if buffer is empty! This will be true when the buffer is empty AND when it is full! 
</div>
</div><p>
<a class="anchor" name="3ee55c37feefe752558e539a7794d2d2"></a><!-- doxytag: member="buses.h::BUS_INFO" ref="3ee55c37feefe752558e539a7794d2d2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct___b_u_s_e_s___i_n_f_o.html">_BUSES_INFO</a>  <a class="el" href="struct___b_u_s_e_s___i_n_f_o.html">BUS_INFO</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Structure containing bus data. 
</div>
</div><p>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="f233d47b7bb72fb3c01e0f8e2ce2fc1a"></a><!-- doxytag: member="buses.h::BUSES" ref="f233d47b7bb72fb3c01e0f8e2ce2fc1a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="buses_8h.html#f233d47b7bb72fb3c01e0f8e2ce2fc1a">BUSES</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="f233d47b7bb72fb3c01e0f8e2ce2fc1aca53920770d011523cd12da1b6b7ae56"></a><!-- doxytag: member="BUSID_SER1" ref="f233d47b7bb72fb3c01e0f8e2ce2fc1aca53920770d011523cd12da1b6b7ae56" args="" -->BUSID_SER1</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="f233d47b7bb72fb3c01e0f8e2ce2fc1a34b25a5c7a01e6762cdb2f823d6dfd28"></a><!-- doxytag: member="BUSID_SER2" ref="f233d47b7bb72fb3c01e0f8e2ce2fc1a34b25a5c7a01e6762cdb2f823d6dfd28" args="" -->BUSID_SER2</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="f233d47b7bb72fb3c01e0f8e2ce2fc1ace997bc26fa60eed6c91082edd3f4798"></a><!-- doxytag: member="BUSID_I2C1" ref="f233d47b7bb72fb3c01e0f8e2ce2fc1ace997bc26fa60eed6c91082edd3f4798" args="" -->BUSID_I2C1</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="f233d47b7bb72fb3c01e0f8e2ce2fc1a6c20fdf81d456778910a88fc6bffbb8d"></a><!-- doxytag: member="BUSID_SPI1" ref="f233d47b7bb72fb3c01e0f8e2ce2fc1a6c20fdf81d456778910a88fc6bffbb8d" args="" -->BUSID_SPI1</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="f233d47b7bb72fb3c01e0f8e2ce2fc1ae7f8aa1eb964029b5ff758e648370401"></a><!-- doxytag: member="BUSID_MAX" ref="f233d47b7bb72fb3c01e0f8e2ce2fc1ae7f8aa1eb964029b5ff758e648370401" args="" -->BUSID_MAX</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="23c7ce8a1682b59aa625bd198637f4cb"></a><!-- doxytag: member="buses.h::busGetByteRxBuf" ref="23c7ce8a1682b59aa625bd198637f4cb" args="(BYTE busId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a> busGetByteRxBuf           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&nbsp;</td>
          <td class="paramname"> <em>busId</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets a byte from the Receive Buffer, and removes it from buffer.<p>
<dl class="user" compact><dt><b>Pre-Condition:</b></dt><dd><a class="el" href="buses_8h.html#b5b07128258df0b1314661e2443bae27">busIsRxBufEmpty()</a> must have been called to confirm the RX Buffer has data!</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus ID of the requested bus. Is a BUSID_XXX variable</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns the next byte in the given bus's RX buffer. </dd></dl>

</div>
</div><p>
<a class="anchor" name="556fa0650cdf6ddc83bba71db8410182"></a><!-- doxytag: member="buses.h::busGetByteTxBuf" ref="556fa0650cdf6ddc83bba71db8410182" args="(BYTE busId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a> busGetByteTxBuf           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&nbsp;</td>
          <td class="paramname"> <em>busId</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets a byte from the Transmit Buffer, and removes it from buffer.<p>
<dl class="user" compact><dt><b>Pre-Condition:</b></dt><dd><a class="el" href="buses_8h.html#db04e06f1d9a0b029ae8824ad93c2b32">busIsTxBufEmpty()</a> must have been called to confirm the TX Buffer has data!</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus ID of the requested bus. Is a BUSID_XXX variable</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns the next byte in the given bus's TX buffer. </dd></dl>

</div>
</div><p>
<a class="anchor" name="5b14fcb27d7cefa0d84aca61d913ede9"></a><!-- doxytag: member="buses.h::busInfoInit" ref="5b14fcb27d7cefa0d84aca61d913ede9" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void busInfoInit           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initializes the busInfo structure with pointers to all buffers. 
</div>
</div><p>
<a class="anchor" name="156f8d89e8d938c0b91ed0616da9e89c"></a><!-- doxytag: member="buses.h::busInit" ref="156f8d89e8d938c0b91ed0616da9e89c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void busInit           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialization code. 
</div>
</div><p>
<a class="anchor" name="5770a3cdf635f19098c1ef799e9caff0"></a><!-- doxytag: member="buses.h::busNetInit" ref="5770a3cdf635f19098c1ef799e9caff0" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void busNetInit           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize bus network components<p>
<dl class="user" compact><dt><b>Pre-Condition:</b></dt><dd>Do NOT call this function before stackInit() has been called! </dd></dl>

</div>
</div><p>
<a class="anchor" name="fea676742cf4f93c7f986438e51569cd"></a><!-- doxytag: member="buses.h::busPeekByteRxBufAt" ref="fea676742cf4f93c7f986438e51569cd" args="(BYTE busId, BYTE offset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a> busPeekByteRxBufAt           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&nbsp;</td>
          <td class="paramname"> <em>busId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&nbsp;</td>
          <td class="paramname"> <em>offset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets a byte at the given offset from the Receive Buffer, without removing it. The byte is NOT removed from the buffer, and the buffer pointers are NOT updated! The byte at the given offset it returned. The offset is how deep the byte is in the buffer. For example, 0 will return first byte in buffer, 5 will return the 6th byte in the buffer.<p>
<dl class="user" compact><dt><b>Pre-Condition:</b></dt><dd>Ensure offset parameter is not larger than current number of bytes contained in buffer. Call <a class="el" href="buses_8h.html#247814d989e5266afc146790dd4b916d">busGetRxBufCount()</a> to get current number of bytes in buffer.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus ID of the requested bus. Is a BUSID_XXX variable </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>Offset of byte to return. Is a value from 0-n, where n = (<a class="el" href="buses_8h.html#247814d989e5266afc146790dd4b916d">busGetRxBufCount()</a> - 1)</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns the byte at the given offset in the given bus's Receive buffer. </dd></dl>

</div>
</div><p>
<a class="anchor" name="3ee8284ce24481ae00710fd42094c32b"></a><!-- doxytag: member="buses.h::busPeekByteTxBufAt" ref="3ee8284ce24481ae00710fd42094c32b" args="(BYTE busId, BYTE offset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a> busPeekByteTxBufAt           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&nbsp;</td>
          <td class="paramname"> <em>busId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&nbsp;</td>
          <td class="paramname"> <em>offset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets a byte at the given offset from the Transmit Buffer, without removing it. The byte is NOT removed from the buffer, and the buffer pointers are NOT updated! The byte at the given offset it returned. The offset is how deep the byte is in the buffer. For example, 0 will return first byte in buffer, 5 will return the 6th byte in the buffer.<p>
<dl class="user" compact><dt><b>Pre-Condition:</b></dt><dd>Ensure offset parameter is not larger than current number of bytes contained in buffer. Call <a class="el" href="buses_8h.html#51d0d83e3606d9a9efefcf27d0b8c009">busGetTxBufCount()</a> to get current number of bytes in buffer.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus ID of the requested bus. Is a BUSID_XXX variable </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>Offset of byte to return. Is a value from 0-n, where n = (<a class="el" href="buses_8h.html#51d0d83e3606d9a9efefcf27d0b8c009">busGetTxBufCount()</a> - 1)</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns the byte at the given offset in the given bus's Transmit buffer. </dd></dl>

</div>
</div><p>
<a class="anchor" name="b99cabe80c12fa9d781ce84dbd637d76"></a><!-- doxytag: member="buses.h::busService" ref="b99cabe80c12fa9d781ce84dbd637d76" args="(BYTE busId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void busService           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&nbsp;</td>
          <td class="paramname"> <em>busId</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Service the given bus. If our code has a section where it has to wait for the transmit buffer of a bus to be empties, it should call this function while waiting.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>busId</em>&nbsp;</td><td>The bus ID of the requested bus. Is a BUSID_XXX variable </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="d2cd5dfdb4ed059edc82b9b8f1ff3860"></a><!-- doxytag: member="buses.h::busTask" ref="d2cd5dfdb4ed059edc82b9b8f1ff3860" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void busTask           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Must be called every couple of ms 
</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="8ee70aa7c20d15845839b0ca20d3680d"></a><!-- doxytag: member="buses.h::busInfo" ref="8ee70aa7c20d15845839b0ca20d3680d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct___b_u_s_e_s___i_n_f_o.html">BUS_INFO</a> <a class="el" href="buses__configurable_8h.html#8ee70aa7c20d15845839b0ca20d3680d">busInfo</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri May 14 08:54:19 2010 for SBC68EC Web Server by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
