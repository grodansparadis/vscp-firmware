<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>SBC68EC Web Server: ex_file_image.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>ex_file_image.c</h1>This example code will update the File System Image. When the FSEE (external EEPROM) File System is used for example, this means that this is basically a write to the EEPROM chip. All data will be overwritten!<p>
If the write process has to be interrupted for some reason (it takes too long) before the fsysCloseImage() function is called, then the fileRelease(0) function has to be called. When returning to the function (and completing the writing of the File System), we will continue with the fsysPutByteImage(c) function calls until the whole File System Image has been written.<p>
<div class="fragment"><pre class="fragment">included <span class="stringliteral">"fsee.h"</span>

<span class="keywordtype">void</span> <a name="a0"></a><a class="code" href="ex__file__image_8c.html#ab92cb37dc17b4df87aa46033d38c9ba">writeImage</a>(<span class="keywordtype">void</span>) {
    <a name="a1"></a><a class="code" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a> c;

    <span class="comment">//Prepare the File System to receive a new Image - all data is overwritten! It is</span>
    <span class="comment">//assigned handle 0</span>
    fsysOpenImage();

    <span class="keywordflow">while</span> (1) {
        <span class="comment">//Get next byte of File System Image</span>
        c = ....
        
        <span class="comment">//Write a byte to the File System Image file</span>
        fsysPutByteImage(c);
        
        <span class="comment">//If finished writing File System Image, break</span>
        <span class="keywordflow">if</span> (...)
            <span class="keywordflow">break</span>;
    }
    
    <span class="comment">//Finished writing new File System Image</span>
    fsysCloseImage();
}
</pre></div> </div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri May 14 08:54:19 2010 for SBC68EC Web Server by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
