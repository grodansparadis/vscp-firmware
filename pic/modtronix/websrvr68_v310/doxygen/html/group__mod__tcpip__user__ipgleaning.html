<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>SBC68EC Web Server: IP Gleaning</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>IP Gleaning<br>
<small>
[<a class="el" href="group__mod__tcpip__user.html">TCP/IP User Protocols</a>]</small>
</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Files</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="arp_8h.html">arp.h</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ARP Module for Modtronix TCP/IP Stack. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="icmp_8h.html">icmp.h</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ICMP Module for Modtronix TCP/IP Stack. <br></td></tr>

<p>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
As a lean alternative to DCHP, the Modtronix TCP/IP Stack also implements a simple method, known as IP Gleaning, to remotely set the IP address of Modtronix Stack node. This method is not an Internet Protocol standard, and there is no corresponding RFC document. IP Gleaning allows only the IP address to be set. For complete IP configuration, DCHP must be used.<p>
IP Gleaning does not require any additional software modules. Instead, it uses the ARP and ICMP modules. To use it, the file "icmp.c" must be included in the project, and the compiler define STACK_USE_IP_GLEANING must be uncommented in the StackTsh.h header file.<p>
With IP Gleaning enabled, the Microchip Stack enters into a special "IP Configuration" mode on RESET. During this mode, it accepts any ICMP (ping) message that is destined to this node, and sets the node’s IP address to that of the ping message’s destination. Once a valid ping packet is received, the stack exits from "Configuration" and enters into normal mode.<p>
During configuration, the user application must not attempt to communicate; it may call the function <a class="el" href="stacktsk_8h.html#e45407243a833740afdbaf2dbd0091bd">StackIsInConfigMode()</a> to determine whether or not the stack is in Configuration mode. <a class="el" href="stacktsk_8h.html#e45407243a833740afdbaf2dbd0091bd">StackIsInConfigMode()</a> == TRUE indicates that Stack is in Configuration mode.<p>
To remotely set the IP address of stack node, it is necessary to issue a sequence of commands from a remote machine. For this example, assume that a node running the Microchip Stack needs to be assigned an IP address of 10.10.5.106. The MAC address of this node (hexadecimal) is 0a-0a-0a-0a-0a-0a. After resetting the node, another system on the network (we will assume a computer running Microsoft Windows) issues the commands:<p>
<div class="fragment"><pre class="fragment">
&gt; arp -s 10.10.5.106 0a-0a-0a-0a-0a-0a

&gt; ping 10.10.5.106
</pre></div><p>
This should generate a standard series of ping responses from 10.10.5.106, indicating the node has been successfully assigned the IP address. </div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri May 14 08:54:23 2010 for SBC68EC Web Server by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
