<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SBC68EC Web Server: net/tcp.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li><a href="examples.html"><span>Examples</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>net/tcp.h File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
TCP Module for Modtronix TCP/IP Stack. 
<p>
<dl compact><dt><b>Author:</b></dt><dd><a href="www.modtronix.com">Modtronix Engineering</a> </dd></dl>
<dl compact><dt><b>Dependencies: </b></dt><dd><a class="el" href="stacktsk_8h.html">stacktsk.h</a> </dd></dl>
<dl compact><dt><b>Compiler: </b></dt><dd>MPLAB C18 v2.10 or higher <br>
 HITECH PICC-18 V8.35PL3 or higher</dd></dl>
<h2><a class="anchor" name="description">
Description</a></h2>
This module contains the TCP code. <br>
For a detailed description, see the <a class="el" href="group__mod__tcpip__base__tcp.html">TCP</a> section of this document - in [Modules] [TCP/IP Stack] [TCP/IP Base Protocols].<h3><a class="anchor" name="tcp_conf">
Configuration</a></h3>
The following defines are used to configure this module, and should be placed in the <a class="el" href="projdefs_8h.html">projdefs.h</a> (or similar) file. For details, see <a class="el" href="group__mod__conf__projdefs.html">Project Configuration</a>. To configure the module, the required defines should be uncommended, and the rest commented out. <div class="fragment"><pre class="fragment"> <span class="comment">//*********************************************************************</span>
 <span class="comment">//-------------------- TCP Configuration --------------------</span>
 <span class="comment">//*********************************************************************</span>
 <span class="comment">//Maximum number of times a connection be retried before closing it down.</span>
<span class="preprocessor"> #define TCP_MAX_RETRY_COUNTS    (3)</span>
<span class="preprocessor"></span>
 <span class="comment">//TCP Timeout value to begin with. This value should normally be from 250ms to 5 seconds</span>
<span class="preprocessor"> #define TCP_START_TIMEOUT_VAL_1   ((TICK16) (TICKS_PER_SECOND * 2))</span>
<span class="preprocessor"></span>
 <span class="comment">//Define ports</span>
<span class="preprocessor"> #define TCP_LOCAL_PORT_START_NUMBER (1024)</span>
<span class="preprocessor"></span><span class="preprocessor"> #define TCP_LOCAL_PORT_END_NUMBER   (5000)</span>
<span class="preprocessor"></span>
 <span class="comment">//When defined, the code will be compiled for optimal speed. If not defined, code</span>
 <span class="comment">//is defined for smallest size.</span>
<span class="preprocessor"> #define TCP_SPEED_OPTIMIZE</span>
<span class="preprocessor"></span>
 <span class="comment">//When defined, each TCP segment is sent twice. This might cause the remote node to</span>
 <span class="comment">//think that we timed out and retransmitted. It could thus immediately send back an</span>
 <span class="comment">//ACK and dramatically improve throuput.</span>
<span class="preprocessor"> #define TCP_SEND_EACH_SEGMENT_TWICE</span>
</pre></div> 
<p>
<code>#include &quot;<a class="el" href="ip_8h.html">net\ip.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="tick_8h.html">net\tick.h</a>&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___s_o_c_k_e_t___i_n_f_o.html">_SOCKET_INFO</a></td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#26769957ec1a2beaf223f33b66ee64ab">INVALID_SOCKET</a>&nbsp;&nbsp;&nbsp;(0xfe)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#e13133e02df5c3c1c8e1da0c38eba32a">REMOTE_HOST</a>(s)&nbsp;&nbsp;&nbsp;(<a class="el" href="tcp_8h.html#47835848a68d46a64677ba3f91234fc5">TCB</a>[s].remote)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#94ca677b9505c7ef73effed0b04e8d26">SIZEOF_MAC_HEADER</a>&nbsp;&nbsp;&nbsp;14</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#8a08d21df3b61bd1c95594f570185cd5">TCP_LOCAL_PORT_END_NUMBER</a>&nbsp;&nbsp;&nbsp;(5000)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#1c6c9de9eb06fcc16d104424ed77564c">TCP_LOCAL_PORT_START_NUMBER</a>&nbsp;&nbsp;&nbsp;(1024)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#a7f380dbde420dc3a4ec69ad584692cc">TCP_MAX_RETRY_COUNTS</a>&nbsp;&nbsp;&nbsp;(3)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#9aa713c39b3c8d9a375ff54929a1c043">TCP_START_TIMEOUT_VAL_1</a>&nbsp;&nbsp;&nbsp;((<a class="el" href="tick_8h.html#549d8b8af44a3f7b61019d870ac1de6f">TICK16</a>) (TICKS_PER_SECOND * 2))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#02a16071293c971cd9792663c7c5687f">TCPGetMaxDataLength</a>()&nbsp;&nbsp;&nbsp;(MAC_TX_BUFFER_SIZE - SIZEOF_MAC_HEADER - sizeof(<a class="el" href="struct___i_p___h_e_a_d_e_r.html">IP_HEADER</a>) - sizeof(TCP_HEADER))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#f9fb827a7f1b2fac383919d472c7510e">UNKNOWN_SOCKET</a>&nbsp;&nbsp;&nbsp;(0xff)</td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="struct___s_o_c_k_e_t___i_n_f_o.html">_SOCKET_INFO</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#749d2dff754654a306e38fdf23738a72">SOCKET_INFO</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="compiler_8h.html#2b0e863dadf920709ec53d9088ee7c91">WORD</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#1ed3e587518e3af95a8b6df962c4d38d">TCP_PORT</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef enum <a class="el" href="tcp_8h.html#49a0f43824a84b7321f047391a9c983f">_TCP_STATE</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#ea464703d7924702c3a2ee22840948c5">TCP_STATE</a></td></tr>

<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#49a0f43824a84b7321f047391a9c983f">_TCP_STATE</a> { <br>
&nbsp;&nbsp;<a class="el" href="tcp_8h.html#49a0f43824a84b7321f047391a9c983f1d5749e83dc48175394d862a245f9b9b">TCP_LISTEN</a> =  0, 
<a class="el" href="tcp_8h.html#49a0f43824a84b7321f047391a9c983f8d61cf0dd6dacc41f87a1ed05766365c">TCP_SYN_SENT</a>, 
<a class="el" href="tcp_8h.html#49a0f43824a84b7321f047391a9c983f933278d61163fd5e5ec2060a1384ef95">TCP_SYN_RECEIVED</a>, 
<a class="el" href="tcp_8h.html#49a0f43824a84b7321f047391a9c983f0e0f72fc96e26fce4543fa99b7235ab4">TCP_ESTABLISHED</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="tcp_8h.html#49a0f43824a84b7321f047391a9c983f5b698e85611a8d3ace1499765a7d2cd7">TCP_FIN_WAIT_1</a>, 
<a class="el" href="tcp_8h.html#49a0f43824a84b7321f047391a9c983f6ca0e6c4fdbfc3d7027ca6b56aaf671c">TCP_FIN_WAIT_2</a>, 
<a class="el" href="tcp_8h.html#49a0f43824a84b7321f047391a9c983f62d0ebf32025a28195c2d8e87e68f3af">TCP_CLOSING</a>, 
<a class="el" href="tcp_8h.html#49a0f43824a84b7321f047391a9c983f818b4dbb00c24a101cde418f7ba02710">TCP_TIME_WAIT</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="tcp_8h.html#49a0f43824a84b7321f047391a9c983f5bbf321fdef3abedd34fc24ddb21a91c">TCP_CLOSE_WAIT</a>, 
<a class="el" href="tcp_8h.html#49a0f43824a84b7321f047391a9c983f3a6ad6b8f47a63d155c55de2b8588759">TCP_LAST_ACK</a>, 
<a class="el" href="tcp_8h.html#49a0f43824a84b7321f047391a9c983f680a81a7e7676aef8d747d1e06610633">TCP_CLOSED</a>
<br>
 }</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#d227d5bd69dfbeab01dba5b2fa21e490">TCPConnect</a> (<a class="el" href="struct___n_o_d_e___i_n_f_o.html">NODE_INFO</a> *remote, <a class="el" href="tcp_8h.html#1ed3e587518e3af95a8b6df962c4d38d">TCP_PORT</a> remotePort)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="compiler_8h.html#54d65c7fa62e62c9754371e42f5111b9">BOOL</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#9c72d5339dc173b079a72fdda8b92010">TCPDiscard</a> (<a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a> s)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#834a38891054ba9b83fc81a255b3b60e">TCPDisconnect</a> (<a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a> s)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="compiler_8h.html#54d65c7fa62e62c9754371e42f5111b9">BOOL</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#4553c681632e9204d8e9c1d3ab457442">TCPFlush</a> (<a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a> s)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="compiler_8h.html#54d65c7fa62e62c9754371e42f5111b9">BOOL</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#79bab2f0a66fba5e2ea517ec6c2e2172">TCPGet</a> (<a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a> s, <a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *byte)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="compiler_8h.html#2b0e863dadf920709ec53d9088ee7c91">WORD</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#8ada309ca4cc150d8e955f8023a2def7">TCPGetArray</a> (<a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a> s, <a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *buffer, <a class="el" href="compiler_8h.html#2b0e863dadf920709ec53d9088ee7c91">WORD</a> count)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct___s_o_c_k_e_t___i_n_f_o.html">SOCKET_INFO</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#25a58b98ce792e7d970480b5fbb8ee52">TCPGetSocketInfo</a> (<a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a> s)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#a14ab130bfd7824b97f571fe55139fc4">TCPInit</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="compiler_8h.html#54d65c7fa62e62c9754371e42f5111b9">BOOL</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#82c37865524f4738b1b794491f813ab8">TCPIsConnected</a> (<a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a> s)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="compiler_8h.html#54d65c7fa62e62c9754371e42f5111b9">BOOL</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#ae10a8213d5d0261c3917909350e630c">TCPIsGetReady</a> (<a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a> s)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="compiler_8h.html#54d65c7fa62e62c9754371e42f5111b9">BOOL</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#bc7449d72e242a60c3395da92649ab4c">TCPIsPutReady</a> (<a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a> s)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#31fd6ee4431126e158518eb313601e19">TCPListen</a> (<a class="el" href="tcp_8h.html#1ed3e587518e3af95a8b6df962c4d38d">TCP_PORT</a> port)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="compiler_8h.html#54d65c7fa62e62c9754371e42f5111b9">BOOL</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#1fa693b8370b2bb1f10823881a95612c">TCPProcess</a> (<a class="el" href="struct___n_o_d_e___i_n_f_o.html">NODE_INFO</a> *remote, <a class="el" href="union___i_p___a_d_d_r.html">IP_ADDR</a> *localIP, <a class="el" href="compiler_8h.html#2b0e863dadf920709ec53d9088ee7c91">WORD</a> len)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="compiler_8h.html#54d65c7fa62e62c9754371e42f5111b9">BOOL</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#5ab1a3e9586819029adaf198568c5eb4">TCPPut</a> (<a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a> s, <a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a> byte)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="compiler_8h.html#54d65c7fa62e62c9754371e42f5111b9">BOOL</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#0c1a9063ff3ff69352e8fd7db96219f2">TCPPutArray</a> (<a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a> s, <a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *buffer, <a class="el" href="compiler_8h.html#2b0e863dadf920709ec53d9088ee7c91">WORD</a> count)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#364093914f3c43521ca04d9b0e5b6a3c">TCPTick</a> (void)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct___s_o_c_k_e_t___i_n_f_o.html">SOCKET_INFO</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tcp_8h.html#47835848a68d46a64677ba3f91234fc5">TCB</a> [MAX_SOCKETS]</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="26769957ec1a2beaf223f33b66ee64ab"></a><!-- doxytag: member="tcp.h::INVALID_SOCKET" ref="26769957ec1a2beaf223f33b66ee64ab" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INVALID_SOCKET&nbsp;&nbsp;&nbsp;(0xfe)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="ex__tcp_8c-example.html#a37">ex_tcp.c</a>, <a class="el" href="ex__tcp__client_8c-example.html#a49">ex_tcp_client.c</a>, and <a class="el" href="ex__tcp__echo_8c-example.html#a81">ex_tcp_echo.c</a>.</dl>
</div>
</div><p>
<a class="anchor" name="e13133e02df5c3c1c8e1da0c38eba32a"></a><!-- doxytag: member="tcp.h::REMOTE_HOST" ref="e13133e02df5c3c1c8e1da0c38eba32a" args="(s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REMOTE_HOST          </td>
          <td>(</td>
          <td class="paramtype">s&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(<a class="el" href="tcp_8h.html#47835848a68d46a64677ba3f91234fc5">TCB</a>[s].remote)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="94ca677b9505c7ef73effed0b04e8d26"></a><!-- doxytag: member="tcp.h::SIZEOF_MAC_HEADER" ref="94ca677b9505c7ef73effed0b04e8d26" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SIZEOF_MAC_HEADER&nbsp;&nbsp;&nbsp;14          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the maximum size the TCP data is allowed to be. This value should never be execeed when writting data to the TCP transmit buffer before calling <a class="el" href="tcp_8h.html#4553c681632e9204d8e9c1d3ab457442">TCPFlush()</a>. For slip: = MAC_TX_BUFFER_SIZE - sizeof(IP_HEADER) - sizeof(TCP_HEADER) = MAC_TX_BUFFER_SIZE - 20 - 20 = MAC_TX_BUFFER_SIZE - 40 For RTL MAC = MAC_TX_BUFFER_SIZE - SIZEOF_MAC_HEADER - sizeof(IP_HEADER) - sizeof(TCP_HEADER) = MAC_TX_BUFFER_SIZE - 14 - 20 - 20 = MAC_TX_BUFFER_SIZE - 54 
</div>
</div><p>
<a class="anchor" name="8a08d21df3b61bd1c95594f570185cd5"></a><!-- doxytag: member="tcp.h::TCP_LOCAL_PORT_END_NUMBER" ref="8a08d21df3b61bd1c95594f570185cd5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TCP_LOCAL_PORT_END_NUMBER&nbsp;&nbsp;&nbsp;(5000)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="1c6c9de9eb06fcc16d104424ed77564c"></a><!-- doxytag: member="tcp.h::TCP_LOCAL_PORT_START_NUMBER" ref="1c6c9de9eb06fcc16d104424ed77564c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TCP_LOCAL_PORT_START_NUMBER&nbsp;&nbsp;&nbsp;(1024)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="a7f380dbde420dc3a4ec69ad584692cc"></a><!-- doxytag: member="tcp.h::TCP_MAX_RETRY_COUNTS" ref="a7f380dbde420dc3a4ec69ad584692cc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TCP_MAX_RETRY_COUNTS&nbsp;&nbsp;&nbsp;(3)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Maximum number of times a connection be retried before closing it down. 
</div>
</div><p>
<a class="anchor" name="9aa713c39b3c8d9a375ff54929a1c043"></a><!-- doxytag: member="tcp.h::TCP_START_TIMEOUT_VAL_1" ref="9aa713c39b3c8d9a375ff54929a1c043" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TCP_START_TIMEOUT_VAL_1&nbsp;&nbsp;&nbsp;((<a class="el" href="tick_8h.html#549d8b8af44a3f7b61019d870ac1de6f">TICK16</a>) (TICKS_PER_SECOND * 2))          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
TCP Timeout value to begin with. 
</div>
</div><p>
<a class="anchor" name="02a16071293c971cd9792663c7c5687f"></a><!-- doxytag: member="tcp.h::TCPGetMaxDataLength" ref="02a16071293c971cd9792663c7c5687f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TCPGetMaxDataLength          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(MAC_TX_BUFFER_SIZE - SIZEOF_MAC_HEADER - sizeof(<a class="el" href="struct___i_p___h_e_a_d_e_r.html">IP_HEADER</a>) - sizeof(TCP_HEADER))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="f9fb827a7f1b2fac383919d472c7510e"></a><!-- doxytag: member="tcp.h::UNKNOWN_SOCKET" ref="f9fb827a7f1b2fac383919d472c7510e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UNKNOWN_SOCKET&nbsp;&nbsp;&nbsp;(0xff)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="749d2dff754654a306e38fdf23738a72"></a><!-- doxytag: member="tcp.h::SOCKET_INFO" ref="749d2dff754654a306e38fdf23738a72" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct___s_o_c_k_e_t___i_n_f_o.html">_SOCKET_INFO</a>  <a class="el" href="struct___s_o_c_k_e_t___i_n_f_o.html">SOCKET_INFO</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Socket info. Union is used to create anonymous structure members. 
</div>
</div><p>
<a class="anchor" name="1ed3e587518e3af95a8b6df962c4d38d"></a><!-- doxytag: member="tcp.h::TCP_PORT" ref="1ed3e587518e3af95a8b6df962c4d38d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="compiler_8h.html#2b0e863dadf920709ec53d9088ee7c91">WORD</a> <a class="el" href="tcp_8h.html#1ed3e587518e3af95a8b6df962c4d38d">TCP_PORT</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A TCP PORT. Is a number from 0-65536 that identifies a TCP port 
</div>
</div><p>
<a class="anchor" name="be3757e564cff2f301e49564cbb5f878"></a><!-- doxytag: member="tcp.h::TCP_SOCKET" ref="be3757e564cff2f301e49564cbb5f878" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a> <a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A TCP socket. Is a number from 0-255 that identifies a TCP socket <dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="ex__tcp_8c-example.html#a36">ex_tcp.c</a>, <a class="el" href="ex__tcp__client_8c-example.html#a48">ex_tcp_client.c</a>, and <a class="el" href="ex__tcp__echo_8c-example.html#a80">ex_tcp_echo.c</a>.</dl>
</div>
</div><p>
<a class="anchor" name="ea464703d7924702c3a2ee22840948c5"></a><!-- doxytag: member="tcp.h::TCP_STATE" ref="ea464703d7924702c3a2ee22840948c5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="tcp_8h.html#49a0f43824a84b7321f047391a9c983f">_TCP_STATE</a>  <a class="el" href="tcp_8h.html#ea464703d7924702c3a2ee22840948c5">TCP_STATE</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
TCP States as defined by rfc793 
</div>
</div><p>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="49a0f43824a84b7321f047391a9c983f"></a><!-- doxytag: member="tcp.h::_TCP_STATE" ref="49a0f43824a84b7321f047391a9c983f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="tcp_8h.html#49a0f43824a84b7321f047391a9c983f">_TCP_STATE</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
TCP States as defined by rfc793 <dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="49a0f43824a84b7321f047391a9c983f1d5749e83dc48175394d862a245f9b9b"></a><!-- doxytag: member="TCP_LISTEN" ref="49a0f43824a84b7321f047391a9c983f1d5749e83dc48175394d862a245f9b9b" args="" -->TCP_LISTEN</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="49a0f43824a84b7321f047391a9c983f8d61cf0dd6dacc41f87a1ed05766365c"></a><!-- doxytag: member="TCP_SYN_SENT" ref="49a0f43824a84b7321f047391a9c983f8d61cf0dd6dacc41f87a1ed05766365c" args="" -->TCP_SYN_SENT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="49a0f43824a84b7321f047391a9c983f933278d61163fd5e5ec2060a1384ef95"></a><!-- doxytag: member="TCP_SYN_RECEIVED" ref="49a0f43824a84b7321f047391a9c983f933278d61163fd5e5ec2060a1384ef95" args="" -->TCP_SYN_RECEIVED</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="49a0f43824a84b7321f047391a9c983f0e0f72fc96e26fce4543fa99b7235ab4"></a><!-- doxytag: member="TCP_ESTABLISHED" ref="49a0f43824a84b7321f047391a9c983f0e0f72fc96e26fce4543fa99b7235ab4" args="" -->TCP_ESTABLISHED</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="49a0f43824a84b7321f047391a9c983f5b698e85611a8d3ace1499765a7d2cd7"></a><!-- doxytag: member="TCP_FIN_WAIT_1" ref="49a0f43824a84b7321f047391a9c983f5b698e85611a8d3ace1499765a7d2cd7" args="" -->TCP_FIN_WAIT_1</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="49a0f43824a84b7321f047391a9c983f6ca0e6c4fdbfc3d7027ca6b56aaf671c"></a><!-- doxytag: member="TCP_FIN_WAIT_2" ref="49a0f43824a84b7321f047391a9c983f6ca0e6c4fdbfc3d7027ca6b56aaf671c" args="" -->TCP_FIN_WAIT_2</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="49a0f43824a84b7321f047391a9c983f62d0ebf32025a28195c2d8e87e68f3af"></a><!-- doxytag: member="TCP_CLOSING" ref="49a0f43824a84b7321f047391a9c983f62d0ebf32025a28195c2d8e87e68f3af" args="" -->TCP_CLOSING</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="49a0f43824a84b7321f047391a9c983f818b4dbb00c24a101cde418f7ba02710"></a><!-- doxytag: member="TCP_TIME_WAIT" ref="49a0f43824a84b7321f047391a9c983f818b4dbb00c24a101cde418f7ba02710" args="" -->TCP_TIME_WAIT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="49a0f43824a84b7321f047391a9c983f5bbf321fdef3abedd34fc24ddb21a91c"></a><!-- doxytag: member="TCP_CLOSE_WAIT" ref="49a0f43824a84b7321f047391a9c983f5bbf321fdef3abedd34fc24ddb21a91c" args="" -->TCP_CLOSE_WAIT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="49a0f43824a84b7321f047391a9c983f3a6ad6b8f47a63d155c55de2b8588759"></a><!-- doxytag: member="TCP_LAST_ACK" ref="49a0f43824a84b7321f047391a9c983f3a6ad6b8f47a63d155c55de2b8588759" args="" -->TCP_LAST_ACK</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="49a0f43824a84b7321f047391a9c983f680a81a7e7676aef8d747d1e06610633"></a><!-- doxytag: member="TCP_CLOSED" ref="49a0f43824a84b7321f047391a9c983f680a81a7e7676aef8d747d1e06610633" args="" -->TCP_CLOSED</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="d227d5bd69dfbeab01dba5b2fa21e490"></a><!-- doxytag: member="tcp.h::TCPConnect" ref="d227d5bd69dfbeab01dba5b2fa21e490" args="(NODE_INFO *remote, TCP_PORT remotePort)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a> TCPConnect           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct___n_o_d_e___i_n_f_o.html">NODE_INFO</a> *&nbsp;</td>
          <td class="paramname"> <em>remote</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tcp_8h.html#1ed3e587518e3af95a8b6df962c4d38d">TCP_PORT</a>&nbsp;</td>
          <td class="paramname"> <em>remotePort</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Do an TCP active open. By default this function is not included in source. You must define STACK_CLIENT_MODE to be able to use this function.<p>
After calling this function, the TCP stack will try and connect with the given target. The user should call the <a class="el" href="tcp_8h.html#82c37865524f4738b1b794491f813ab8">TCPIsConnected()</a> function to see if the connection has been made. The TCP stack will continuously try and connect. It is up to the user to terminate the connection attempts if no connection is made after a certian time. The <a class="el" href="tcp_8h.html#834a38891054ba9b83fc81a255b3b60e">TCPDisconnect()</a> function can be used to stop the TCP stack from trying to connect.<p>
<dl compact><dt><b>Pre-Condition:</b></dt><dd><a class="el" href="tcp_8h.html#a14ab130bfd7824b97f571fe55139fc4">TCPInit()</a> is already called.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>remote</em>&nbsp;</td><td>Remote node address info </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>remotePort</em>&nbsp;</td><td>remote port to be connected.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>A new socket is created, connection request is sent and socket handle is returned. </dd></dl>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="ex__tcp__client_8c-example.html#a67">ex_tcp_client.c</a>.</dl>
</div>
</div><p>
<a class="anchor" name="9c72d5339dc173b079a72fdda8b92010"></a><!-- doxytag: member="tcp.h::TCPDiscard" ref="9c72d5339dc173b079a72fdda8b92010" args="(TCP_SOCKET s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="compiler_8h.html#54d65c7fa62e62c9754371e42f5111b9">BOOL</a> TCPDiscard           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a>&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Discard any data contained in the given socket's receive buffer.<p>
<dl compact><dt><b>Pre-Condition:</b></dt><dd><a class="el" href="tcp_8h.html#a14ab130bfd7824b97f571fe55139fc4">TCPInit()</a> is already called.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>socket</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>TRUE if socket received data was discarded <br>
 FALSE if socket received data was already discarded </dd></dl>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="ex__tcp_8c-example.html#a46">ex_tcp.c</a>, and <a class="el" href="ex__tcp__echo_8c-example.html#a88">ex_tcp_echo.c</a>.</dl>
</div>
</div><p>
<a class="anchor" name="834a38891054ba9b83fc81a255b3b60e"></a><!-- doxytag: member="tcp.h::TCPDisconnect" ref="834a38891054ba9b83fc81a255b3b60e" args="(TCP_SOCKET s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TCPDisconnect           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a>&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A disconnect request is sent for given socket.<p>
<dl compact><dt><b>Pre-Condition:</b></dt><dd><a class="el" href="tcp_8h.html#a14ab130bfd7824b97f571fe55139fc4">TCPInit()</a> is already called AND<br>
 TCPIsPutReady(s) == TRUE</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>Socket to be disconnected. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="ex__tcp__client_8c-example.html#a74">ex_tcp_client.c</a>.</dl>
</div>
</div><p>
<a class="anchor" name="4553c681632e9204d8e9c1d3ab457442"></a><!-- doxytag: member="tcp.h::TCPFlush" ref="4553c681632e9204d8e9c1d3ab457442" args="(TCP_SOCKET s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="compiler_8h.html#54d65c7fa62e62c9754371e42f5111b9">BOOL</a> TCPFlush           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a>&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
All and any data associated with this socket is marked as ready for transmission.<p>
<dl compact><dt><b>Pre-Condition:</b></dt><dd><a class="el" href="tcp_8h.html#a14ab130bfd7824b97f571fe55139fc4">TCPInit()</a> is already called.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>Socket whose data is to be transmitted.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>TRUE is action was performed <br>
 FALSE if not </dd></dl>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="ex__tcp__client_8c-example.html#a72">ex_tcp_client.c</a>, and <a class="el" href="ex__tcp__echo_8c-example.html#a91">ex_tcp_echo.c</a>.</dl>
</div>
</div><p>
<a class="anchor" name="79bab2f0a66fba5e2ea517ec6c2e2172"></a><!-- doxytag: member="tcp.h::TCPGet" ref="79bab2f0a66fba5e2ea517ec6c2e2172" args="(TCP_SOCKET s, BYTE *byte)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="compiler_8h.html#54d65c7fa62e62c9754371e42f5111b9">BOOL</a> TCPGet           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a>&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *&nbsp;</td>
          <td class="paramname"> <em>byte</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function reads the next byte from the current TCP packet. Reads a single byte from the given socket into the given byte pointer<p>
<dl compact><dt><b>Pre-Condition:</b></dt><dd><a class="el" href="tcp_8h.html#a14ab130bfd7824b97f571fe55139fc4">TCPInit()</a> is already called AND TCPIsGetReady(s) == TRUE</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>socket </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>byte</em>&nbsp;</td><td>Pointer to a byte.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>TRUE if a byte was read. FALSE if byte was not read. </dd></dl>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="ex__tcp_8c-example.html#a44">ex_tcp.c</a>, and <a class="el" href="ex__tcp__echo_8c-example.html#a87">ex_tcp_echo.c</a>.</dl>
</div>
</div><p>
<a class="anchor" name="8ada309ca4cc150d8e955f8023a2def7"></a><!-- doxytag: member="tcp.h::TCPGetArray" ref="8ada309ca4cc150d8e955f8023a2def7" args="(TCP_SOCKET s, BYTE *buffer, WORD count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="compiler_8h.html#2b0e863dadf920709ec53d9088ee7c91">WORD</a> TCPGetArray           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a>&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="compiler_8h.html#2b0e863dadf920709ec53d9088ee7c91">WORD</a>&nbsp;</td>
          <td class="paramname"> <em>count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read the requested number of bytes from the given socket into the given buffer.<p>
<dl compact><dt><b>Pre-Condition:</b></dt><dd><a class="el" href="tcp_8h.html#a14ab130bfd7824b97f571fe55139fc4">TCPInit()</a> is already called AND <br>
 TCPIsGetReady(s) == TRUE</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>socket </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>buffer</em>&nbsp;</td><td>Buffer to hold received data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>count</em>&nbsp;</td><td>Buffer length</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Number of bytes loaded into buffer. </dd></dl>

</div>
</div><p>
<a class="anchor" name="25a58b98ce792e7d970480b5fbb8ee52"></a><!-- doxytag: member="tcp.h::TCPGetSocketInfo" ref="25a58b98ce792e7d970480b5fbb8ee52" args="(TCP_SOCKET s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct___s_o_c_k_e_t___i_n_f_o.html">SOCKET_INFO</a>* TCPGetSocketInfo           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a>&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns a pointer to the SOCKET_INFO structure for the given socket.<p>
<dl compact><dt><b>Pre-Condition:</b></dt><dd><a class="el" href="tcp_8h.html#a14ab130bfd7824b97f571fe55139fc4">TCPInit()</a> is already called.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>socket</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Returns a pointer to the SOCKET_INFO structure for the given socket. </dd></dl>

</div>
</div><p>
<a class="anchor" name="a14ab130bfd7824b97f571fe55139fc4"></a><!-- doxytag: member="tcp.h::TCPInit" ref="a14ab130bfd7824b97f571fe55139fc4" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TCPInit           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize all socket info. This function is called only one during lifetime of the application. 
</div>
</div><p>
<a class="anchor" name="82c37865524f4738b1b794491f813ab8"></a><!-- doxytag: member="tcp.h::TCPIsConnected" ref="82c37865524f4738b1b794491f813ab8" args="(TCP_SOCKET s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="compiler_8h.html#54d65c7fa62e62c9754371e42f5111b9">BOOL</a> TCPIsConnected           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a>&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A socket is said to be connected if it is not in LISTEN and CLOSED mode. Socket may be in SYN_RCVD or FIN_WAIT_1 and may contain socket data.<p>
<dl compact><dt><b>Pre-Condition:</b></dt><dd><a class="el" href="tcp_8h.html#a14ab130bfd7824b97f571fe55139fc4">TCPInit()</a> is already called.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>Socket to be checked for connection.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>TRUE if given socket is connected<br>
 FALSE if given socket is not connected. </dd></dl>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="ex__tcp_8c-example.html#a42">ex_tcp.c</a>, <a class="el" href="ex__tcp__client_8c-example.html#a69">ex_tcp_client.c</a>, and <a class="el" href="ex__tcp__echo_8c-example.html#a85">ex_tcp_echo.c</a>.</dl>
</div>
</div><p>
<a class="anchor" name="ae10a8213d5d0261c3917909350e630c"></a><!-- doxytag: member="tcp.h::TCPIsGetReady" ref="ae10a8213d5d0261c3917909350e630c" args="(TCP_SOCKET s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="compiler_8h.html#54d65c7fa62e62c9754371e42f5111b9">BOOL</a> TCPIsGetReady           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a>&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A socket is said to be "Get" ready when it has already received some data. Sometime, a socket may be closed, but it still may contain data. Thus in order to ensure reuse of a socket, caller must make sure that it reads a socket, if it is ready. This function also checks that the given socket is valid, is not equal to INVALID_SOCKET for example<p>
<dl compact><dt><b>Pre-Condition:</b></dt><dd><a class="el" href="tcp_8h.html#a14ab130bfd7824b97f571fe55139fc4">TCPInit()</a> is already called.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>socket to test</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>TRUE if socket 's' contains any data.<br>
 FALSE if socket 's' does not contain any data. </dd></dl>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="ex__tcp_8c-example.html#a43">ex_tcp.c</a>, and <a class="el" href="ex__tcp__echo_8c-example.html#a86">ex_tcp_echo.c</a>.</dl>
</div>
</div><p>
<a class="anchor" name="bc7449d72e242a60c3395da92649ab4c"></a><!-- doxytag: member="tcp.h::TCPIsPutReady" ref="bc7449d72e242a60c3395da92649ab4c" args="(TCP_SOCKET s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="compiler_8h.html#54d65c7fa62e62c9754371e42f5111b9">BOOL</a> TCPIsPutReady           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a>&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Each socket maintains only one transmit buffer. Hence until a data packet is acknowledeged by remote node, socket will not be ready for next transmission. All control transmission such as Connect, Disconnect do not consume/reserve any transmit buffer. This function will check:<ul>
<li>If the given socket is valid, is not equal to INVALID_SOCKET for example</li><li>If there is an available TX Buffer for writing data to via <a class="el" href="tcp_8h.html#5ab1a3e9586819029adaf198568c5eb4">TCPPut()</a> and <a class="el" href="tcp_8h.html#0c1a9063ff3ff69352e8fd7db96219f2">TCPPutArray()</a> functions.</li><li>If the given socket is ready for transmission</li></ul>
<p>
<dl compact><dt><b>Pre-Condition:</b></dt><dd><a class="el" href="tcp_8h.html#a14ab130bfd7824b97f571fe55139fc4">TCPInit()</a> is already called.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>socket to test</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>TRUE if socket 's' is free to transmit, and it is a valid socket<br>
 FALSE if socket 's' is not free to transmit, or an invalid socket was given. </dd></dl>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="ex__tcp__client_8c-example.html#a70">ex_tcp_client.c</a>, and <a class="el" href="ex__tcp__echo_8c-example.html#a89">ex_tcp_echo.c</a>.</dl>
</div>
</div><p>
<a class="anchor" name="31fd6ee4431126e158518eb313601e19"></a><!-- doxytag: member="tcp.h::TCPListen" ref="31fd6ee4431126e158518eb313601e19" args="(TCP_PORT port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a> TCPListen           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tcp_8h.html#1ed3e587518e3af95a8b6df962c4d38d">TCP_PORT</a>&nbsp;</td>
          <td class="paramname"> <em>port</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Pre-Condition:</b></dt><dd><a class="el" href="tcp_8h.html#a14ab130bfd7824b97f571fe55139fc4">TCPInit()</a> is already called.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>port</em>&nbsp;</td><td>A TCP port to be opened.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Given port is opened and returned on success INVALID_SOCKET if no more sockets left. </dd></dl>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="ex__tcp_8c-example.html#a41">ex_tcp.c</a>, and <a class="el" href="ex__tcp__echo_8c-example.html#a84">ex_tcp_echo.c</a>.</dl>
</div>
</div><p>
<a class="anchor" name="1fa693b8370b2bb1f10823881a95612c"></a><!-- doxytag: member="tcp.h::TCPProcess" ref="1fa693b8370b2bb1f10823881a95612c" args="(NODE_INFO *remote, IP_ADDR *localIP, WORD len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="compiler_8h.html#54d65c7fa62e62c9754371e42f5111b9">BOOL</a> TCPProcess           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct___n_o_d_e___i_n_f_o.html">NODE_INFO</a> *&nbsp;</td>
          <td class="paramname"> <em>remote</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="union___i_p___a_d_d_r.html">IP_ADDR</a> *&nbsp;</td>
          <td class="paramname"> <em>localIP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="compiler_8h.html#2b0e863dadf920709ec53d9088ee7c91">WORD</a>&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Performs TCP tasks.<p>
<dl compact><dt><b>Pre-Condition:</b></dt><dd><a class="el" href="tcp_8h.html#a14ab130bfd7824b97f571fe55139fc4">TCPInit()</a> is already called AND <br>
 TCP segment is ready in MAC buffer</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>remote</em>&nbsp;</td><td>Remote node info </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>localIP</em>&nbsp;</td><td>Local IP address </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Total length of TCP semgent.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>TRUE if this function has completed its task <br>
 FALSE otherwise </dd></dl>

</div>
</div><p>
<a class="anchor" name="5ab1a3e9586819029adaf198568c5eb4"></a><!-- doxytag: member="tcp.h::TCPPut" ref="5ab1a3e9586819029adaf198568c5eb4" args="(TCP_SOCKET s, BYTE byte)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="compiler_8h.html#54d65c7fa62e62c9754371e42f5111b9">BOOL</a> TCPPut           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a>&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&nbsp;</td>
          <td class="paramname"> <em>byte</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Write the given byte to the given socket's transmit buffer. The data is NOT sent yet, and the <a class="el" href="tcp_8h.html#4553c681632e9204d8e9c1d3ab457442">TCPFlush()</a> function must be called to send all data contained in the transmit buffer.<p>
<dl compact><dt><b>Pre-Condition:</b></dt><dd><a class="el" href="tcp_8h.html#bc7449d72e242a60c3395da92649ab4c">TCPIsPutReady()</a> == TRUE</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>socket to use </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>byte</em>&nbsp;</td><td>a data byte to send</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>TRUE if transmit buffer is still ready to accept more data bytes <br>
 FALSE if transmit buffer can no longer accept any more data byte.<br>
 If FALSE is returned, then <a class="el" href="tcp_8h.html#bc7449d72e242a60c3395da92649ab4c">TCPIsPutReady()</a> has to be called again before calling <a class="el" href="tcp_8h.html#5ab1a3e9586819029adaf198568c5eb4">TCPPut()</a> or <a class="el" href="tcp_8h.html#0c1a9063ff3ff69352e8fd7db96219f2">TCPPutArray()</a> functions! </dd></dl>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="ex__tcp__client_8c-example.html#a71">ex_tcp_client.c</a>, and <a class="el" href="ex__tcp__echo_8c-example.html#a90">ex_tcp_echo.c</a>.</dl>
</div>
</div><p>
<a class="anchor" name="0c1a9063ff3ff69352e8fd7db96219f2"></a><!-- doxytag: member="tcp.h::TCPPutArray" ref="0c1a9063ff3ff69352e8fd7db96219f2" args="(TCP_SOCKET s, BYTE *buffer, WORD count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="compiler_8h.html#54d65c7fa62e62c9754371e42f5111b9">BOOL</a> TCPPutArray           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tcp_8h.html#be3757e564cff2f301e49564cbb5f878">TCP_SOCKET</a>&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="compiler_8h.html#2b0e863dadf920709ec53d9088ee7c91">WORD</a>&nbsp;</td>
          <td class="paramname"> <em>count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Given number of data bytes from the given array are put into the given socket's transmit buffer. The data is NOT sent yet, and the <a class="el" href="tcp_8h.html#4553c681632e9204d8e9c1d3ab457442">TCPFlush()</a> function must be called to send all data contained in the transmit buffer.<p>
If there is not enough space in the transmit buffer for all the data, the contents of the transmit buffer will be sent, and this function will return the actual amount of bytes that were sent. In this case, it is VERY IMPORTANT to call the <a class="el" href="tcp_8h.html#bc7449d72e242a60c3395da92649ab4c">TCPIsPutReady()</a> function again before calling the <a class="el" href="tcp_8h.html#5ab1a3e9586819029adaf198568c5eb4">TCPPut()</a> or <a class="el" href="tcp_8h.html#0c1a9063ff3ff69352e8fd7db96219f2">TCPPutArray()</a> functions! This will however only happen if the transmit buffer fills up. The transmit buffer for TCP data is = (MAC_TX_BUFFER_SIZE - 54), which is usually 970 bytes. If writing less then this to the transmit buffer before calling <a class="el" href="tcp_8h.html#4553c681632e9204d8e9c1d3ab457442">TCPFlush()</a>, then this function will always return the requested number of bytes!<p>
<dl compact><dt><b>Pre-Condition:</b></dt><dd><a class="el" href="tcp_8h.html#bc7449d72e242a60c3395da92649ab4c">TCPIsPutReady()</a> == TRUE</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>socket to use </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>buffer</em>&nbsp;</td><td>Buffer containing data that has to be sent. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>count</em>&nbsp;</td><td>Number of bytes to send</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>TRUE if transmit buffer is still ready to accept more data bytes <br>
 FALSE if transmit buffer can no longer accept any more data byte.<br>
 If FALSE is returned, then <a class="el" href="tcp_8h.html#bc7449d72e242a60c3395da92649ab4c">TCPIsPutReady()</a> has to be called again before calling <a class="el" href="tcp_8h.html#5ab1a3e9586819029adaf198568c5eb4">TCPPut()</a> or <a class="el" href="tcp_8h.html#0c1a9063ff3ff69352e8fd7db96219f2">TCPPutArray()</a> functions! </dd></dl>

</div>
</div><p>
<a class="anchor" name="364093914f3c43521ca04d9b0e5b6a3c"></a><!-- doxytag: member="tcp.h::TCPTick" ref="364093914f3c43521ca04d9b0e5b6a3c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TCPTick           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Each socket FSM is executed for any timeout situation.<p>
<dl compact><dt><b>Pre-Condition:</b></dt><dd><a class="el" href="tcp_8h.html#a14ab130bfd7824b97f571fe55139fc4">TCPInit()</a> is already called. </dd></dl>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="47835848a68d46a64677ba3f91234fc5"></a><!-- doxytag: member="tcp.h::TCB" ref="47835848a68d46a64677ba3f91234fc5" args="[MAX_SOCKETS]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct___s_o_c_k_e_t___i_n_f_o.html">SOCKET_INFO</a> <a class="el" href="tcp_8h.html#47835848a68d46a64677ba3f91234fc5">TCB</a>[MAX_SOCKETS]          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
These are all the sockets supported by this TCP. 
</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Mon Oct 9 11:35:14 2006 for SBC68EC Web Server by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
