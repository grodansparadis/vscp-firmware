<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SBC68EC Web Server: net/ip.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li><a href="examples.html"><span>Examples</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>net/ip.h File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
IP Module for Modtronix TCP/IP Stack. 
<p>
<dl compact><dt><b>Author:</b></dt><dd><a href="www.modtronix.com">Modtronix Engineering</a> </dd></dl>
<dl compact><dt><b>Dependencies: </b></dt><dd><a class="el" href="stacktsk_8h.html">stacktsk.h</a>, <a class="el" href="mac_8h.html">mac.h</a> </dd></dl>
<dl compact><dt><b>Compiler: </b></dt><dd>MPLAB C18 v2.10 or higher <br>
 HITECH PICC-18 V8.35PL3 or higher</dd></dl>
<h2><a class="anchor" name="description">
Description</a></h2>
This module contains the IP code. <br>
For a detailed description, see the <a class="el" href="group__mod__tcpip__base__ip.html">IP</a> section of this document - in [Modules] [TCP/IP Stack] [TCP/IP Base Protocols].<h3><a class="anchor" name="ip_conf">
Configuration</a></h3>
The following defines are used to configure this module, and should be placed in the <a class="el" href="projdefs_8h.html">projdefs.h</a> (or similar) file. For details, see <a class="el" href="group__mod__conf__projdefs.html">Project Configuration</a>. To configure the module, the required defines should be uncommended, and the rest commented out. <div class="fragment"><pre class="fragment"> <span class="comment">//*********************************************************************</span>
 <span class="comment">//-------------------- IP Configuration --------------------</span>
 <span class="comment">//*********************************************************************</span>
 <span class="comment">//Time-To-Live in Seconds</span>
<span class="preprocessor"> #define MY_IP_TTL   (100)</span>
<span class="preprocessor"></span> <span class="comment">//When defined, the code will be compiled for optimal speed. If not defined, code is defined</span>
 <span class="comment">//for smallest size.</span>
<span class="preprocessor"> #define IP_SPEED_OPTIMIZE</span>
</pre></div> 
<p>
<code>#include &quot;<a class="el" href="mac_8h.html">net\mac.h</a>&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">union &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="union___i_p___a_d_d_r.html">_IP_ADDR</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___i_p___h_e_a_d_e_r.html">_IP_HEADER</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___n_o_d_e___i_n_f_o.html">_NODE_INFO</a></td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ip_8h.html#2c7f8ed61852fa76e1d367db09ddb842">IP_PROT_ICMP</a>&nbsp;&nbsp;&nbsp;(1)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ip_8h.html#6e86f632fc7105a3ba9bbce6b6613b22">IP_PROT_TCP</a>&nbsp;&nbsp;&nbsp;(6)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ip_8h.html#60f34b1421fb4ad88de39dc54e901baf">IP_PROT_UDP</a>&nbsp;&nbsp;&nbsp;(17)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ip_8h.html#d87aacddd53722dbb6a6e0db4a87522d">IPDiscard</a>()&nbsp;&nbsp;&nbsp;MACDiscard()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ip_8h.html#30cf136e062675f48fd6390af2d7d3e9">IPGetArray</a>(a, b)&nbsp;&nbsp;&nbsp;MACGetArray(a, b)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ip_8h.html#345cefc3e4b4a2e67e3f3092e9925e2e">IPIsTxReady</a>(HighPriority)&nbsp;&nbsp;&nbsp;MACIsTxReady(HighPriority)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ip_8h.html#6ae85da08e2423579a99c757ec2b9b16">IPPutArray</a>(a, b)&nbsp;&nbsp;&nbsp;MACPutArray(a, b)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ip_8h.html#bd7e733748ec8e562864b71303c98058">IPSetTxBuffer</a>(buffer, offset)&nbsp;&nbsp;&nbsp;MACSetTxBuffer(buffer, offset+sizeof(<a class="el" href="struct___i_p___h_e_a_d_e_r.html">IP_HEADER</a>))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ip_8h.html#5c5a9dca6afd2671026a8a006acbb4e9">MY_IP_TTL</a>&nbsp;&nbsp;&nbsp;(100)</td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="union___i_p___a_d_d_r.html">_IP_ADDR</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ip_8h.html#216f90626a001652c3ddb7fc8d5c586a">IP_ADDR</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="struct___i_p___h_e_a_d_e_r.html">_IP_HEADER</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ip_8h.html#64c429ae399d4215db66c0d32b2c87c5">IP_HEADER</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="struct___n_o_d_e___i_n_f_o.html">_NODE_INFO</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ip_8h.html#02842f8de9f6fc09b458d78c337b27c4">NODE_INFO</a></td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="compiler_8h.html#54d65c7fa62e62c9754371e42f5111b9">BOOL</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ip_8h.html#d3e2c3f5e91f8cb460a8e6b30ba02c6a">IPGetHeader</a> (<a class="el" href="union___i_p___a_d_d_r.html">IP_ADDR</a> *localIP, <a class="el" href="struct___n_o_d_e___i_n_f_o.html">NODE_INFO</a> *remote, <a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *protocol, <a class="el" href="compiler_8h.html#2b0e863dadf920709ec53d9088ee7c91">WORD</a> *len)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="compiler_8h.html#2b0e863dadf920709ec53d9088ee7c91">WORD</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ip_8h.html#d3bcc7a7c328bc6435c97646a25d21f0">IPPutHeader</a> (<a class="el" href="struct___n_o_d_e___i_n_f_o.html">NODE_INFO</a> *remote, <a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a> protocol, <a class="el" href="compiler_8h.html#2b0e863dadf920709ec53d9088ee7c91">WORD</a> len)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ip_8h.html#95c631b3ad0927b0f74eeedac4518160">IPSetRxBuffer</a> (<a class="el" href="compiler_8h.html#2b0e863dadf920709ec53d9088ee7c91">WORD</a> offset)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="2c7f8ed61852fa76e1d367db09ddb842"></a><!-- doxytag: member="ip.h::IP_PROT_ICMP" ref="2c7f8ed61852fa76e1d367db09ddb842" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IP_PROT_ICMP&nbsp;&nbsp;&nbsp;(1)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="6e86f632fc7105a3ba9bbce6b6613b22"></a><!-- doxytag: member="ip.h::IP_PROT_TCP" ref="6e86f632fc7105a3ba9bbce6b6613b22" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IP_PROT_TCP&nbsp;&nbsp;&nbsp;(6)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="60f34b1421fb4ad88de39dc54e901baf"></a><!-- doxytag: member="ip.h::IP_PROT_UDP" ref="60f34b1421fb4ad88de39dc54e901baf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IP_PROT_UDP&nbsp;&nbsp;&nbsp;(17)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="d87aacddd53722dbb6a6e0db4a87522d"></a><!-- doxytag: member="ip.h::IPDiscard" ref="d87aacddd53722dbb6a6e0db4a87522d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPDiscard          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;MACDiscard()</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Pre-Condition:</b></dt><dd><a class="el" href="mac_8h.html#18cabbf973ecec4ba5b67dc2c729b753">MACGetHeader()</a> == TRUE</dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>Current packet is discarded and buffer is freed up </dd></dl>

</div>
</div><p>
<a class="anchor" name="30cf136e062675f48fd6390af2d7d3e9"></a><!-- doxytag: member="ip.h::IPGetArray" ref="30cf136e062675f48fd6390af2d7d3e9" args="(a, b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPGetArray          </td>
          <td>(</td>
          <td class="paramtype">a,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">b&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;MACGetArray(a, b)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Data is copied from IP data to given buffer<p>
<dl compact><dt><b>Pre-Condition:</b></dt><dd><a class="el" href="mac_8h.html#18cabbf973ecec4ba5b67dc2c729b753">MACGetHeader()</a> == TRUE</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>a</em>&nbsp;</td><td>Data buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>b</em>&nbsp;</td><td>Buffer length </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="345cefc3e4b4a2e67e3f3092e9925e2e"></a><!-- doxytag: member="ip.h::IPIsTxReady" ref="345cefc3e4b4a2e67e3f3092e9925e2e" args="(HighPriority)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPIsTxReady          </td>
          <td>(</td>
          <td class="paramtype">HighPriority&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;MACIsTxReady(HighPriority)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check if ready for next transmission.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>HighPriority</em>&nbsp;</td><td>Specifies if this call has high priority</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>TRUE if transmit buffer is empty <br>
 FALSE if transmit buffer is not empty </dd></dl>

</div>
</div><p>
<a class="anchor" name="6ae85da08e2423579a99c757ec2b9b16"></a><!-- doxytag: member="ip.h::IPPutArray" ref="6ae85da08e2423579a99c757ec2b9b16" args="(a, b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPPutArray          </td>
          <td>(</td>
          <td class="paramtype">a,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">b&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;MACPutArray(a, b)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Data is copied to IP data area.<p>
<dl compact><dt><b>Pre-Condition:</b></dt><dd><a class="el" href="ip_8h.html#345cefc3e4b4a2e67e3f3092e9925e2e">IPIsTxReady()</a> == TRUE</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>a</em>&nbsp;</td><td>Data buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>b</em>&nbsp;</td><td>Buffer length </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="bd7e733748ec8e562864b71303c98058"></a><!-- doxytag: member="ip.h::IPSetTxBuffer" ref="bd7e733748ec8e562864b71303c98058" args="(buffer, offset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPSetTxBuffer          </td>
          <td>(</td>
          <td class="paramtype">buffer,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">offset&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;MACSetTxBuffer(buffer, offset+sizeof(<a class="el" href="struct___i_p___h_e_a_d_e_r.html">IP_HEADER</a>))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function makes the given transmit buffer active, and sets it's access pointer to be: <br>
<ul>
<li>At the given offset after the IP header <br>
</li><li>In the given TX Buffer <br>
 So, if we pass 0 in as the offset, we will set the pointer to the first byte of after the IP header. All future read and writes to the TX Buffer will be to the set location.</li></ul>
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>Buffer identifier </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>Offset </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="5c5a9dca6afd2671026a8a006acbb4e9"></a><!-- doxytag: member="ip.h::MY_IP_TTL" ref="5c5a9dca6afd2671026a8a006acbb4e9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MY_IP_TTL&nbsp;&nbsp;&nbsp;(100)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="216f90626a001652c3ddb7fc8d5c586a"></a><!-- doxytag: member="ip.h::IP_ADDR" ref="216f90626a001652c3ddb7fc8d5c586a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef union <a class="el" href="union___i_p___a_d_d_r.html">_IP_ADDR</a>  <a class="el" href="union___i_p___a_d_d_r.html">IP_ADDR</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Structure to store an IP address. For example, if IP address is "192.168.1.0", then:<ul>
<li><a class="el" href="union___i_p___a_d_d_r.html#0f2952da392b0347625ed7a1ae6f1f7d">IP_ADDR.v</a>[0] = 192</li><li><a class="el" href="union___i_p___a_d_d_r.html#0f2952da392b0347625ed7a1ae6f1f7d">IP_ADDR.v</a>[1] = 168</li><li><a class="el" href="union___i_p___a_d_d_r.html#0f2952da392b0347625ed7a1ae6f1f7d">IP_ADDR.v</a>[2] = 1</li><li><a class="el" href="union___i_p___a_d_d_r.html#0f2952da392b0347625ed7a1ae6f1f7d">IP_ADDR.v</a>[3] = 10 </li></ul>

</div>
</div><p>
<a class="anchor" name="64c429ae399d4215db66c0d32b2c87c5"></a><!-- doxytag: member="ip.h::IP_HEADER" ref="64c429ae399d4215db66c0d32b2c87c5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct___i_p___h_e_a_d_e_r.html">_IP_HEADER</a>  <a class="el" href="struct___i_p___h_e_a_d_e_r.html">IP_HEADER</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
IP packet header definition 
</div>
</div><p>
<a class="anchor" name="02842f8de9f6fc09b458d78c337b27c4"></a><!-- doxytag: member="ip.h::NODE_INFO" ref="02842f8de9f6fc09b458d78c337b27c4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct___n_o_d_e___i_n_f_o.html">_NODE_INFO</a>  <a class="el" href="struct___n_o_d_e___i_n_f_o.html">NODE_INFO</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Structure to store a nodes info 
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="d3e2c3f5e91f8cb460a8e6b30ba02c6a"></a><!-- doxytag: member="ip.h::IPGetHeader" ref="d3e2c3f5e91f8cb460a8e6b30ba02c6a" args="(IP_ADDR *localIP, NODE_INFO *remote, BYTE *protocol, WORD *len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="compiler_8h.html#54d65c7fa62e62c9754371e42f5111b9">BOOL</a> IPGetHeader           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="union___i_p___a_d_d_r.html">IP_ADDR</a> *&nbsp;</td>
          <td class="paramname"> <em>localIP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct___n_o_d_e___i_n_f_o.html">NODE_INFO</a> *&nbsp;</td>
          <td class="paramname"> <em>remote</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *&nbsp;</td>
          <td class="paramname"> <em>protocol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="compiler_8h.html#2b0e863dadf920709ec53d9088ee7c91">WORD</a> *&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Only one IP message can be received. Caller may not transmit and receive a message at the same time. If this function returns false, the caller must call <a class="el" href="mac_8h.html#6f0a2614cde1253e6edcc78d1a069b79">MACDiscardRx()</a> to discard and release the current receive buffer!<p>
<dl compact><dt><b>Pre-Condition:</b></dt><dd><a class="el" href="mac_8h.html#18cabbf973ecec4ba5b67dc2c729b753">MACGetHeader()</a> == TRUE</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>localIP</em>&nbsp;</td><td>Local node IP Address (Destination IP Address) as received in current IP header. If this information is not required caller may pass NULL value. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>remote</em>&nbsp;</td><td>Remote node info </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>protocol</em>&nbsp;</td><td>Current packet protocol </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Length of IP data. For example, if TCP is contained in this IP packet, this will be = TCP Header length + TCP Data Length</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>TRUE, if valid packet was received <br>
 FALSE otherwise - call <a class="el" href="mac_8h.html#6f0a2614cde1253e6edcc78d1a069b79">MACDiscardRx()</a> to discard message if FALSE is returned !! </dd></dl>

</div>
</div><p>
<a class="anchor" name="d3bcc7a7c328bc6435c97646a25d21f0"></a><!-- doxytag: member="ip.h::IPPutHeader" ref="d3bcc7a7c328bc6435c97646a25d21f0" args="(NODE_INFO *remote, BYTE protocol, WORD len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="compiler_8h.html#2b0e863dadf920709ec53d9088ee7c91">WORD</a> IPPutHeader           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct___n_o_d_e___i_n_f_o.html">NODE_INFO</a> *&nbsp;</td>
          <td class="paramname"> <em>remote</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="compiler_8h.html#4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&nbsp;</td>
          <td class="paramname"> <em>protocol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="compiler_8h.html#2b0e863dadf920709ec53d9088ee7c91">WORD</a>&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Write the Ethernet Header (MAC Header) and IP Header to the current TX buffer. The last parameter (len) is the length of the data to follow. This function will do the following:<ul>
<li>
Reset the NIC Remote DMA write pointer to the first byte of the current TX Buffer  </li>
<li>
Write the given header  </li>
<li>
Set the NIC Remote DMA byte count to the given len. This configures the Remote DMA to receive the given number of bytes. Only one IP message can be transmitted at any time. Caller may not transmit and receive a message at the same time.</li>
</ul>
<p>
<dl compact><dt><b>Pre-Condition:</b></dt><dd><a class="el" href="ip_8h.html#345cefc3e4b4a2e67e3f3092e9925e2e">IPIsTxReady()</a> == TRUE</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>remote</em>&nbsp;</td><td>Destination node address </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>protocol</em>&nbsp;</td><td>Protocol of data to follow, for example IP_PROT_ICMP, IP_PROT_TCP.... </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Total length of IP data bytes to follow, excluding IP header. This is the length of the bytes to follow.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Handle to current packet - For use by IPSendByte() function. </dd></dl>

</div>
</div><p>
<a class="anchor" name="95c631b3ad0927b0f74eeedac4518160"></a><!-- doxytag: member="ip.h::IPSetRxBuffer" ref="95c631b3ad0927b0f74eeedac4518160" args="(WORD offset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IPSetRxBuffer           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="compiler_8h.html#2b0e863dadf920709ec53d9088ee7c91">WORD</a>&nbsp;</td>
          <td class="paramname"> <em>offset</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets the receive buffer access pointer to given offset in IP Data. For example, if IP data is a TCP packet, an offset of 0 will set access to first byte of TCP header. Layers that use IP services (TCP, UDP...) should call this macro to set the access pointer for the current buffer.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>Offset, An offset with respect to IP Data </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Mon Oct 9 11:35:14 2006 for SBC68EC Web Server by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
