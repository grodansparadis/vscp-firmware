<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>SBC68EC Web Server: DHCP</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li><a href="examples.html"><span>Examples</span></a></li>
  </ul>
</div>
<h1>DHCP<br>
<small>
[<a class="el" href="group__mod__tcpip__user.html">TCP/IP User Protocols</a>]</small>
</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
The DHCP layer of the Modtronix TCP/IP stack is implemented by the file "dhcp.c". The header file "dhcp.h" defines the services provided by the layer. DHCP is an active layer that broadcasts DHCP requests and automatically receives and decodes DHCP responses. Its main features include: <ul>
<li>Configuration of the IP and gateway addresses and subnet mask </li>
<li>Automatic DHCP lease time and lease renewal management </li>
<li>Fully automatic operation without user application intervention</li>
</ul>
The DHCP module is implemented as a cooperative task, performing automatic operations without the knowledge of the main application. The actual DHCP integration and control is done by the Stack Manager; it handles all required operations as part of its standard task, using the DHCP APIs to control the module∆s behavior. The user does not need to know about DHCP in order to use it.<p>
A user application may also choose to call some of the APIs to directly control DHCP operation, such as whether DHCP is configured or not, and whether to permanently stop DHCP. Normally, the user's application should not need to directly interact with DHCP at all. To use the DHCP module, the user project files must be modified as follows: <ul>
<li>Uncomment STACK_USE_DHCP in the header file "StackTsk.h". </li>
<li>Include the "dhcp.c" and "udp.c" files in the project. </li>
<li>Increase MAX_UDP_SOCKETS by one (at least one UDP socket must be available for DCHP; adjust the numbers of sockets based on UDP and DCHP needs).</li>
</ul>
When DHCP is implemented, the user application must not attempt network communications until DHCP is configured properly. Normally, if a user application contains one or more client applications that require communications on power-up or RESET, the application must check that DHCP is configured before transmitting any data using the lower layer modules. This can be done with the function <a class="el" href="dhcp_8h.html#3ae116adb45880eba7e51975817cf63f">DHCPIsBound()</a><p>
The official DHCP specification (RFC1541) requires the DHCP client to renew its IP configuration before its lease time expires. To track lease time, the user application must make sure that <a class="el" href="tick_8h.html#08df44af1ba3936f477f19de3b755b53">TickUpdate()</a> is called as required, and that reasonable time accuracy is maintained (refer to the source code file "websrvr.c" for a working example). The time resolution required is 15 minutes, plus or minus, which means that <a class="el" href="tick_8h.html#08df44af1ba3936f477f19de3b755b53">TickUpdate()</a> may be called at a very low priority.<p>
For the DHCP module to automatically configure the addresses and subnet mask, there must be at least one DHCP server on the network. It is the user∆s responsibility to implement some method for "publishing" the configurations back to potential users. Options range from manually reading the information from a display on each node, to storing the information in a central server. DHCP updates the values of MY_IP_BYTE?, MY_GATE_BYTE? and MY_MASK_BYTE? as a result of automatic configuration.<h2><a class="anchor" name="mod_tcpip_user_dhcp_conf">
Configuration</a></h2>
For details on configuring this module, see <a class="el" href="dhcp_8h.html#dhcp_conf">Configuration</a> section of <a class="el" href="dhcp_8h.html" title="DHCP client Module for Modtronix TCP/IP Stack.">dhcp.h</a> file. 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Files</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dhcp_8h.html">dhcp.h</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">DHCP client Module for Modtronix TCP/IP Stack. <br></td></tr>

<p>
</table>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Jul 9 08:38:55 2007 for SBC68EC Web Server by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
