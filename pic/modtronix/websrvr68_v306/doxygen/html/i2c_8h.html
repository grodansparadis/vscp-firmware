<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>SBC68EC Web Server: net/i2c.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li><a href="examples.html"><span>Examples</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul>
</div>
<h1>net/i2c.h File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
I2C Functions. 
<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd><a href="www.modtronix.com">Modtronix Engineering</a> </dd></dl>
<dl class="user" compact><dt><b>Compiler: </b></dt><dd>MPLAB C18 v2.10 or higher <br>
 HITECH PICC-18 V8.35PL3 or higher</dd></dl>
<h2><a class="anchor" name="description">
Description</a></h2>
This module contains code for reading and writing devices on the I2C bus. 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#1f84492fee6167e22c0b8e8adb67c83c">i2cBusCollision</a>()&nbsp;&nbsp;&nbsp;PIR2_BCLIF</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#ac01de1c4969e99926a71f6a047e18b7">i2cClose</a>()&nbsp;&nbsp;&nbsp;(SSPCON1 &amp;= 0xDF)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#34ad0160e067077265e45218e48e8feb">i2cDataRdy</a>()&nbsp;&nbsp;&nbsp;(SSPSTAT_BF)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#d8bba49e6b431c23e23b1f5ee2e60f1e">i2cIsIdle</a>()&nbsp;&nbsp;&nbsp;(((SSPCON2 &amp; 0x1F) | (SSPSTAT_R_W)) ? FALSE : TRUE)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#30ffe91b39d8101aeb8b3854f5792676">i2cPutAck</a>()&nbsp;&nbsp;&nbsp;{SSPCON2_ACKDT=0; SSPCON2_ACKEN=1;}</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#4d8d8117eec3f8c3b9c17e3e1f979b1e">i2cPutAckAndWait</a>()&nbsp;&nbsp;&nbsp;{SSPCON2_ACKDT=0; SSPCON2_ACKEN=1;while(SSPCON2_ACKEN); /*Wait till finished*/}</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#c0f9bce9238849398a538bf61b84d4a1">i2cPutNack</a>()&nbsp;&nbsp;&nbsp;{SSPCON2_ACKDT=1; SSPCON2_ACKEN=1;}</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#a9abf084e101bdc3ee47c80bc48a418b">i2cPutNackAndWait</a>()&nbsp;&nbsp;&nbsp;{SSPCON2_ACKDT=1; SSPCON2_ACKEN=1; while(SSPCON2_ACKEN); /*Wait till finished*/}</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#08f4cfa776021ab26b8a0903886c5035">i2cPutStart</a>()&nbsp;&nbsp;&nbsp;(SSPCON2_SEN=1)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#d42687e8c05f548683c751eb9a0a9072">i2cPutStartAndWait</a>()&nbsp;&nbsp;&nbsp;{SSPCON2_SEN=1; while ( SSPCON2_SEN );}</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#e0ff3c018406efaf342f3313337abd16">i2cPutStop</a>()&nbsp;&nbsp;&nbsp;(SSPCON2_PEN=1)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#7b73e70d625ad847b94ff976d7a2ee55">i2cPutStopAndWait</a>()&nbsp;&nbsp;&nbsp;{SSPCON2_PEN=1; while(SSPCON2_PEN);}</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#3b94378de47bf3bfe5681739365b49e6">i2cRestart</a>()&nbsp;&nbsp;&nbsp;(SSPCON2_RSEN=1)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#1e578fbdcd366c11f3201c8093576cc4">i2cRestartAndWait</a>()&nbsp;&nbsp;&nbsp;{SSPCON2_RSEN=1; while (SSPCON2_RSEN);}</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#957b6a03639a74dfdbe38f90582ec708">i2cWaitForIdle</a>()&nbsp;&nbsp;&nbsp;while ((SSPCON2 &amp; 0x1F) | (SSPSTAT_R_W))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#941f5eb52b3cd7005203148c73c3dcde">i2cWasAckReceived</a>()&nbsp;&nbsp;&nbsp;(!SSPCON2_ACKSTAT)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#31a91add3b3c9bd837bea5e9a61ef4ce">SSPENB</a>&nbsp;&nbsp;&nbsp;0x20</td></tr>

<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#a226465ed17b185a4da45c4792d309a8">I2C_MASTER</a>&nbsp;&nbsp;&nbsp;8</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#6a7c6a01f23eda42f74ffc2b5abfcfdd">I2C_SLAVE_10</a>&nbsp;&nbsp;&nbsp;7</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#7ccd60aa382028d02913e9c65d698aa8">I2C_SLAVE_7</a>&nbsp;&nbsp;&nbsp;6</td></tr>

<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#27cf310dac6c98eca59bf4b9884d9102">I2C_SLEW_OFF</a>&nbsp;&nbsp;&nbsp;0x80</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#9dbb03eee541b3bbcceb907ef75abac6">I2C_SLEW_OFF_SMBUS</a>&nbsp;&nbsp;&nbsp;0xC0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#562c5b9c555d183bb173819d1508e4e3">I2C_SLEW_ON</a>&nbsp;&nbsp;&nbsp;0x00</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#4ee24ca1d082adf10258c43ba0099d66">I2C_SLEW_ON_SMBUS</a>&nbsp;&nbsp;&nbsp;0x40</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#4901f9395ecbb7903e7db41080ad26c6">i2cGetByte</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#c5846f8e409f0407e568d40d7d539d55">i2cOpen</a> (unsigned char mode, unsigned char slew, unsigned char baud)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#29d877a61ebd30ef92fce68c71a1ac7c">i2cPutByte</a> (unsigned char data_out)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a226465ed17b185a4da45c4792d309a8"></a><!-- doxytag: member="i2c.h::I2C_MASTER" ref="a226465ed17b185a4da45c4792d309a8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I2C_MASTER&nbsp;&nbsp;&nbsp;8          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="6a7c6a01f23eda42f74ffc2b5abfcfdd"></a><!-- doxytag: member="i2c.h::I2C_SLAVE_10" ref="6a7c6a01f23eda42f74ffc2b5abfcfdd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I2C_SLAVE_10&nbsp;&nbsp;&nbsp;7          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="7ccd60aa382028d02913e9c65d698aa8"></a><!-- doxytag: member="i2c.h::I2C_SLAVE_7" ref="7ccd60aa382028d02913e9c65d698aa8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I2C_SLAVE_7&nbsp;&nbsp;&nbsp;6          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The following defines are used for the <em>mode</em> parameter in the <a class="el" href="i2c_8h.html#c5846f8e409f0407e568d40d7d539d55">i2cOpen()</a> function:<ul>
<li>I2C_SLAVE_7 I2C Slave mode, 7-bit address</li><li>I2C_SLAVE_10 I2C Slave mode, 10-bit address</li><li>I2C_MASTER I2C Master mode </li></ul>

</div>
</div><p>
<a class="anchor" name="27cf310dac6c98eca59bf4b9884d9102"></a><!-- doxytag: member="i2c.h::I2C_SLEW_OFF" ref="27cf310dac6c98eca59bf4b9884d9102" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I2C_SLEW_OFF&nbsp;&nbsp;&nbsp;0x80          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The following defines are used for the <em>slew</em> parameter in the <a class="el" href="i2c_8h.html#c5846f8e409f0407e568d40d7d539d55">i2cOpen()</a> function:<ul>
<li>I2C_SLEW_OFF Slew rate disabled for 100kHz mode</li><li>I2C_SLEW_ON Slew rate enabled for 400kHz mode</li><li>I2C_SLEW_OFF_SMBUS Slew rate disabled for 100kHz mode, SMBus inputs enabled</li><li>I2C_SLEW_ON_SMBUS Slew rate enabled for 400kHz mode, SMBus inputs enabled </li></ul>

</div>
</div><p>
<a class="anchor" name="9dbb03eee541b3bbcceb907ef75abac6"></a><!-- doxytag: member="i2c.h::I2C_SLEW_OFF_SMBUS" ref="9dbb03eee541b3bbcceb907ef75abac6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I2C_SLEW_OFF_SMBUS&nbsp;&nbsp;&nbsp;0xC0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="562c5b9c555d183bb173819d1508e4e3"></a><!-- doxytag: member="i2c.h::I2C_SLEW_ON" ref="562c5b9c555d183bb173819d1508e4e3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I2C_SLEW_ON&nbsp;&nbsp;&nbsp;0x00          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="4ee24ca1d082adf10258c43ba0099d66"></a><!-- doxytag: member="i2c.h::I2C_SLEW_ON_SMBUS" ref="4ee24ca1d082adf10258c43ba0099d66" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I2C_SLEW_ON_SMBUS&nbsp;&nbsp;&nbsp;0x40          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="1f84492fee6167e22c0b8e8adb67c83c"></a><!-- doxytag: member="i2c.h::i2cBusCollision" ref="1f84492fee6167e22c0b8e8adb67c83c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define i2cBusCollision          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;PIR2_BCLIF</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Test if a bus collision has occured. Return TRUE if it did, else FALSE 
</div>
</div><p>
<a class="anchor" name="ac01de1c4969e99926a71f6a047e18b7"></a><!-- doxytag: member="i2c.h::i2cClose" ref="ac01de1c4969e99926a71f6a047e18b7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define i2cClose          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(SSPCON1 &amp;= 0xDF)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Disable I2C module 
</div>
</div><p>
<a class="anchor" name="34ad0160e067077265e45218e48e8feb"></a><!-- doxytag: member="i2c.h::i2cDataRdy" ref="34ad0160e067077265e45218e48e8feb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define i2cDataRdy          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(SSPSTAT_BF)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Checks if the SSP buffer contains any data that can be read.<p>
Example: <div class="fragment"><pre class="fragment">  <span class="keywordflow">if</span> (<a class="code" href="i2c_8h.html#34ad0160e067077265e45218e48e8feb">i2cDataRdy</a>())
  {
      var = <a class="code" href="i2c_8h.html#4901f9395ecbb7903e7db41080ad26c6">i2cGetByte</a>();
  }
</pre></div><p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>1 if there is data in the SSP buffer 0 if there is no data in the SSP buffer </dd></dl>

</div>
</div><p>
<a class="anchor" name="d8bba49e6b431c23e23b1f5ee2e60f1e"></a><!-- doxytag: member="i2c.h::i2cIsIdle" ref="d8bba49e6b431c23e23b1f5ee2e60f1e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define i2cIsIdle          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(((SSPCON2 &amp; 0x1F) | (SSPSTAT_R_W)) ? FALSE : TRUE)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Checks if the I2C bus is IDLE, and available to be used. The <a class="el" href="i2c_8h.html#d8bba49e6b431c23e23b1f5ee2e60f1e">i2cIsIdle()</a> function is required since the hardware I2C peripheral does not allow for spooling of bus sequences. The I2C peripheral must be in an IDLE state before an I2C operation can be initiated or a write collision will be generated.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TRUE if I2C bus is idle and can be used <br>
 FALSE if I2C bus is NOT idle. User has to wait until bus is idle before using it. </dd></dl>

</div>
</div><p>
<a class="anchor" name="30ffe91b39d8101aeb8b3854f5792676"></a><!-- doxytag: member="i2c.h::i2cPutAck" ref="30ffe91b39d8101aeb8b3854f5792676" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define i2cPutAck          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;{SSPCON2_ACKDT=0; SSPCON2_ACKEN=1;}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Generate bus ACK condition 
</div>
</div><p>
<a class="anchor" name="4d8d8117eec3f8c3b9c17e3e1f979b1e"></a><!-- doxytag: member="i2c.h::i2cPutAckAndWait" ref="4d8d8117eec3f8c3b9c17e3e1f979b1e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define i2cPutAckAndWait          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;{SSPCON2_ACKDT=0; SSPCON2_ACKEN=1;while(SSPCON2_ACKEN); /*Wait till finished*/}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Generate bus ACK condition, and waits until it is finished 
</div>
</div><p>
<a class="anchor" name="c0f9bce9238849398a538bf61b84d4a1"></a><!-- doxytag: member="i2c.h::i2cPutNack" ref="c0f9bce9238849398a538bf61b84d4a1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define i2cPutNack          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;{SSPCON2_ACKDT=1; SSPCON2_ACKEN=1;}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Generate bus Not ACK condition. 
</div>
</div><p>
<a class="anchor" name="a9abf084e101bdc3ee47c80bc48a418b"></a><!-- doxytag: member="i2c.h::i2cPutNackAndWait" ref="a9abf084e101bdc3ee47c80bc48a418b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define i2cPutNackAndWait          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;{SSPCON2_ACKDT=1; SSPCON2_ACKEN=1; while(SSPCON2_ACKEN); /*Wait till finished*/}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Generate bus Not ACK condition, and waits until it is finished 
</div>
</div><p>
<a class="anchor" name="08f4cfa776021ab26b8a0903886c5035"></a><!-- doxytag: member="i2c.h::i2cPutStart" ref="08f4cfa776021ab26b8a0903886c5035" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define i2cPutStart          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(SSPCON2_SEN=1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Generate bus start condition 
</div>
</div><p>
<a class="anchor" name="d42687e8c05f548683c751eb9a0a9072"></a><!-- doxytag: member="i2c.h::i2cPutStartAndWait" ref="d42687e8c05f548683c751eb9a0a9072" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define i2cPutStartAndWait          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;{SSPCON2_SEN=1; while ( SSPCON2_SEN );}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Generate bus start condition, and waits until it is finished 
</div>
</div><p>
<a class="anchor" name="e0ff3c018406efaf342f3313337abd16"></a><!-- doxytag: member="i2c.h::i2cPutStop" ref="e0ff3c018406efaf342f3313337abd16" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define i2cPutStop          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(SSPCON2_PEN=1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Generate bus stop condition 
</div>
</div><p>
<a class="anchor" name="7b73e70d625ad847b94ff976d7a2ee55"></a><!-- doxytag: member="i2c.h::i2cPutStopAndWait" ref="7b73e70d625ad847b94ff976d7a2ee55" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define i2cPutStopAndWait          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;{SSPCON2_PEN=1; while(SSPCON2_PEN);}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Generate bus stop condition, and waits until it is finished 
</div>
</div><p>
<a class="anchor" name="3b94378de47bf3bfe5681739365b49e6"></a><!-- doxytag: member="i2c.h::i2cRestart" ref="3b94378de47bf3bfe5681739365b49e6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define i2cRestart          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(SSPCON2_RSEN=1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Generate bus restart condition 
</div>
</div><p>
<a class="anchor" name="1e578fbdcd366c11f3201c8093576cc4"></a><!-- doxytag: member="i2c.h::i2cRestartAndWait" ref="1e578fbdcd366c11f3201c8093576cc4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define i2cRestartAndWait          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;{SSPCON2_RSEN=1; while (SSPCON2_RSEN);}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Generate bus restart condition, and waits until it is finished 
</div>
</div><p>
<a class="anchor" name="957b6a03639a74dfdbe38f90582ec708"></a><!-- doxytag: member="i2c.h::i2cWaitForIdle" ref="957b6a03639a74dfdbe38f90582ec708" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define i2cWaitForIdle          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;while ((SSPCON2 &amp; 0x1F) | (SSPSTAT_R_W))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Waits until the I2C bus is IDLE, and available to be used. The <a class="el" href="i2c_8h.html#957b6a03639a74dfdbe38f90582ec708">i2cWaitForIdle()</a> function is required since the hardware I2C peripheral does not allow for spooling of bus sequences. The I2C peripheral must be in an IDLE state before an I2C operation can be initiated or a write collision will be generated. 
</div>
</div><p>
<a class="anchor" name="941f5eb52b3cd7005203148c73c3dcde"></a><!-- doxytag: member="i2c.h::i2cWasAckReceived" ref="941f5eb52b3cd7005203148c73c3dcde" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define i2cWasAckReceived          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(!SSPCON2_ACKSTAT)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Tests if an ACK was received from the slave. Returns true if it was, else false. 
</div>
</div><p>
<a class="anchor" name="31a91add3b3c9bd837bea5e9a61ef4ce"></a><!-- doxytag: member="i2c.h::SSPENB" ref="31a91add3b3c9bd837bea5e9a61ef4ce" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SSPENB&nbsp;&nbsp;&nbsp;0x20          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Enable serial port and configures SCK, SDO, SDI 
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="4901f9395ecbb7903e7db41080ad26c6"></a><!-- doxytag: member="i2c.h::i2cGetByte" ref="4901f9395ecbb7903e7db41080ad26c6" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char i2cGetByte           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read single byte from I2C bus<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Contents of SSPBUF register </dd></dl>

</div>
</div><p>
<a class="anchor" name="c5846f8e409f0407e568d40d7d539d55"></a><!-- doxytag: member="i2c.h::i2cOpen" ref="c5846f8e409f0407e568d40d7d539d55" args="(unsigned char mode, unsigned char slew, unsigned char baud)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2cOpen           </td>
          <td>(</td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>slew</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>baud</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function resets the SSP module to the POR state and then configures the module for Master/Slave mode and the selected slew rate.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>One of the following values defined in <a class="el" href="i2c_8h.html" title="I2C Functions.">i2c.h</a>:<ul>
<li>I2C_SLAVE_7 I2C Slave mode, 7-bit address</li><li>I2C_SLAVE_10 I2C Slave mode, 10-bit address</li><li>I2C_MASTER I2C Master mode </li></ul>
</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>slew</em>&nbsp;</td><td>One of the following values, defined in <a class="el" href="i2c_8h.html" title="I2C Functions.">i2c.h</a>:<ul>
<li>I2C_SLEW_OFF Slew rate disabled for 100 kHz mode</li><li>I2C_SLEW_ON Slew rate enabled for 400 kHz mode </li></ul>
</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>baud</em>&nbsp;</td><td>The baud rate of the I2C unit when configured for I2C Master mode. This is the value that will be assigned to the SSPADD register. It is calculated as follows: <br>
 SSPADD = ( ((CLOCK_FREQ / BAUD) / 4) - 1 ) <br>
<br>
 For example, if the CPU clock frequency is 40MHz and we need a I2C baud rate of 400KHz: <br>
 SSPADD = ( ((40,000,000/400,000) / 4) - 1 ) = 24<br>
<br>
 Some common values for SSPADD are:<br>
<ul>
<li>400 KHz at 40 MHz system clock = 24</li><li>400 KHz at 20 MHz system clock = 12</li><li>400 KHz at 10 MHz system clock = 5 </li></ul>
</td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="29d877a61ebd30ef92fce68c71a1ac7c"></a><!-- doxytag: member="i2c.h::i2cPutByte" ref="29d877a61ebd30ef92fce68c71a1ac7c" args="(unsigned char data_out)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char i2cPutByte           </td>
          <td>(</td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>data_out</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This routine writes a single byte to the I2C bus, and waits until the bus is idle before returning.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>data_out</em>&nbsp;</td><td>Single data byte for I2C bus</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Status byte for WCOL detection.<br>
 Returns 0 if OK, else 1 if error </dd></dl>

</div>
</div><p>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Jul 9 08:38:52 2007 for SBC68EC Web Server by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
